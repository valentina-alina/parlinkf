const __vite__fileDeps=["assets/ConfidentialityPage-DYmwdnl4.js","assets/react-DHBI0EtI.js","assets/classnames-C9FZUsQl.js","assets/flowbite-react-Bkuqc2tl.js","assets/tailwind-merge-Du4_Do6r.js","assets/react-icons-Bv9z3nYI.js","assets/debounce-B36raNOm.js","assets/@floating-ui-CybHMkaK.js","assets/react-dom-B4HDzmPo.js","assets/scheduler-CzFDRTuY.js","assets/tabbable-DNPBiPWX.js","assets/LegalPage-W44RFwpF.js","assets/ContactPage-DT7OBEhL.js","assets/formik-COfibRyj.js","assets/deepmerge-DhIoniG1.js","assets/lodash-es-dVqQl90_.js","assets/react-fast-compare-CnCej0V4.js","assets/hoist-non-react-statics-Buxaj0Kl.js","assets/react-is-8JwjhRSi.js","assets/yup-Cbev0jF0.js","assets/property-expr-DEi1ZLzV.js","assets/tiny-case-BJ7jYKNY.js","assets/toposort-C0HQooLr.js","assets/UserManagement-DtuiAL1n.js","assets/react-router-dom-DfnLAedG.js","assets/react-router-CxejpPFA.js","assets/@remix-run-B-RBrVrq.js","assets/profileFaker-BHvBl0Hw.js","assets/UserProfilePage-BYrzh5tm.js","assets/UserEditProfilePage-LsDnwLty.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{j as e,r as o,a as Oe}from"./react-DHBI0EtI.js";import{c as Je}from"./react-dom-B4HDzmPo.js";import{O as Fe,d as We,e as K,a as le,f as Qe,g as N}from"./react-router-CxejpPFA.js";import{N as ee,T as ie,M as Te,L as $,C as V,a as Y,B as me,b as ve,c as De,F as Ke,d as de,e as ce,f as P,g as re,h as Ye,S as Ee,i as Pe,j as $e}from"./flowbite-react-Bkuqc2tl.js";import{n as he,o as Xe,p as et,q as tt,C as ye,r as Ie,s as ze,B as st,t as at,u as rt,v as nt,w as lt,x as it,I as ot,A as dt,y as ct,z as mt}from"./react-icons-Bv9z3nYI.js";import{L as f,B as ut}from"./react-router-dom-DfnLAedG.js";import{j as Re}from"./jwt-decode-VWaDGczM.js";import{a as ht}from"./axios-B4uVmeYG.js";import{u as gt,G as je,M as we,I as xt}from"./@react-google-maps-LpTwjbHX.js";import{F as pt,i as ft,a as bt,b as vt,l as yt}from"./@fullcalendar-DW7oSlLf.js";import{I as He}from"./react-infinite-scroll-component-B6HYhv8s.js";import{$ as Ze}from"./react-loader-spinner-DqUhPy2Y.js";import{f as Be,a as Ge}from"./date-fns-DMqgr4aw.js";import{u as jt}from"./formik-COfibRyj.js";import{c as wt,a as Se}from"./yup-Cbev0jF0.js";import"./classnames-C9FZUsQl.js";import"./scheduler-CzFDRTuY.js";import"./@remix-run-B-RBrVrq.js";import"./tailwind-merge-Du4_Do6r.js";import"./debounce-B36raNOm.js";import"./@floating-ui-CybHMkaK.js";import"./tabbable-DNPBiPWX.js";import"./preact-CD9qK7CG.js";import"./styled-components-BPr5Wr9K.js";import"./@emotion-sScrWPmR.js";import"./stylis-DinRj2j6.js";import"./deepmerge-DhIoniG1.js";import"./lodash-es-dVqQl90_.js";import"./react-fast-compare-CnCej0V4.js";import"./hoist-non-react-statics-Buxaj0Kl.js";import"./react-is-8JwjhRSi.js";import"./property-expr-DEi1ZLzV.js";import"./tiny-case-BJ7jYKNY.js";import"./toposort-C0HQooLr.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))n(m);new MutationObserver(m=>{for(const c of m)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function d(m){const c={};return m.integrity&&(c.integrity=m.integrity),m.referrerPolicy&&(c.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?c.credentials="include":m.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(m){if(m.ep)return;m.ep=!0;const c=d(m);fetch(m.href,c)}})();const _t="modulepreload",Nt=function(r){return"/"+r},Ae={},se=function(s,d,n){let m=Promise.resolve();if(d&&d.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),h=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));m=Promise.all(d.map(g=>{if(g=Nt(g),g in Ae)return;Ae[g]=!0;const u=g.endsWith(".css"),p=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${p}`))return;const v=document.createElement("link");if(v.rel=u?"stylesheet":_t,u||(v.as="script",v.crossOrigin=""),v.href=g,h&&v.setAttribute("nonce",h),document.head.appendChild(v),u)return new Promise((w,_)=>{v.addEventListener("load",w),v.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${g}`)))})}))}return m.then(()=>s()).catch(c=>{const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=c,window.dispatchEvent(h),!h.defaultPrevented)throw c})};function Ve(){return e.jsx(e.Fragment,{children:e.jsx("h1",{className:"font-bodyTest text-2xl mt-28 italic text-orange-500",children:"404 ERROR NOT FOUND PAGE"})})}const Ct=()=>localStorage.getItem("accessToken")?e.jsx(Fe,{}):e.jsx(We,{to:"/"}),ue="/assets/logo-CucIrNHc.png";function kt({searchQuery:r,setSearchQuery:s}){const[d,n]=o.useState(!0),[m,c]=o.useState(!1);return console.log("isAdmin",m),o.useEffect(()=>{const h=localStorage.getItem("accessToken");h&&Re(h).role==="admin"&&c(!0)},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"sticky top-0 scale-110 mb-8 flex justify-center items-center z-50",children:[e.jsxs(ee,{fluid:!0,rounded:!0,className:"hidden sm:block w-full",children:[e.jsx(ee.Brand,{children:e.jsx(f,{to:"/ads-grid",children:e.jsx("img",{src:ue,alt:"logo ParLink",className:"ml-8 h-6 sm:h-9 scale-150"})})}),e.jsx("div",{className:"max-w-md ml-10 sm:ml-16 mr-10 sm:mr-16",children:e.jsx(ie,{className:"w-80",id:"search",type:"text",icon:he,placeholder:"Rechercher...",value:r,onChange:h=>{s(h.target.value)}})}),e.jsx("div",{className:"flex md:order-2",children:e.jsx(ee.Toggle,{})}),e.jsxs(ee.Collapse,{children:[d?e.jsx(f,{to:"/calendar",onClick:()=>n(!1),children:e.jsx("svg",{className:"w-6 h-6 text-gray-800 dark:text-white scale-125 mt-3 hover:text-blue-800 dark:hover:text-blue-800","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{fillRule:"evenodd",d:"M5 5a1 1 0 0 0 1-1 1 1 0 1 1 2 0 1 1 0 0 0 1 1h1a1 1 0 0 0 1-1 1 1 0 1 1 2 0 1 1 0 0 0 1 1h1a1 1 0 0 0 1-1 1 1 0 1 1 2 0 1 1 0 0 0 1 1 2 2 0 0 1 2 2v1a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V7a2 2 0 0 1 2-2ZM3 19v-7a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2Zm6.01-6a1 1 0 1 0-2 0 1 1 0 0 0 2 0Zm2 0a1 1 0 1 1 2 0 1 1 0 0 1-2 0Zm6 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0Zm-10 4a1 1 0 1 1 2 0 1 1 0 0 1-2 0Zm6 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0Zm2 0a1 1 0 1 1 2 0 1 1 0 0 1-2 0Z",clipRule:"evenodd"})})}):e.jsx(f,{to:"/ads-grid",onClick:()=>n(!0),children:e.jsx("svg",{className:"w-6 h-6 text-gray-800 dark:text-white scale-125 mt-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{fillRule:"evenodd",d:"M5.617 2.076a1 1 0 0 1 1.09.217L8 3.586l1.293-1.293a1 1 0 0 1 1.414 0L12 3.586l1.293-1.293a1 1 0 0 1 1.414 0L16 3.586l1.293-1.293A1 1 0 0 1 19 3v18a1 1 0 0 1-1.707.707L16 20.414l-1.293 1.293a1 1 0 0 1-1.414 0L12 20.414l-1.293 1.293a1 1 0 0 1-1.414 0L8 20.414l-1.293 1.293A1 1 0 0 1 5 21V3a1 1 0 0 1 .617-.924ZM9 7a1 1 0 0 0 0 2h6a1 1 0 1 0 0-2H9Zm0 4a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2H9Zm0 4a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2H9Z",clipRule:"evenodd"})})}),e.jsx(f,{to:"/files",children:e.jsx("svg",{className:"w-6 h-6 text-gray-800 dark:text-white scale-125 mt-3 hover:text-blue-800 dark:hover:text-blue-800","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{"fill-rule":"evenodd",d:"M3 6a2 2 0 0 1 2-2h5.532a2 2 0 0 1 1.536.72l1.9 2.28H3V6Zm0 3v10a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V9H3Z","clip-rule":"evenodd"})})}),e.jsx(f,{"data-cy":"create-ad",to:"/new-ad",children:e.jsxs("span",{className:"before:block before:absolute before:-inset-1 before:-skew-y-3 before:bg-blue-700 relative flex gap-2 p-1 mt-2",children:[e.jsx("span",{className:"relative text-white m-1",children:"ajout annonce "})," ",e.jsx("span",{children:e.jsx(Xe,{className:"relative text-white h-5 w-5"})})]})}),e.jsx(f,{to:"/chat",children:e.jsx("svg",{className:"w-6 h-6 text-gray-800 dark:text-white scale-125 mt-3 hover:text-blue-800 dark:hover:text-blue-800","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{"fill-rule":"evenodd",d:"M3 6a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-6.616l-2.88 2.592C8.537 20.461 7 19.776 7 18.477V17H5a2 2 0 0 1-2-2V6Zm4 2a1 1 0 0 0 0 2h5a1 1 0 1 0 0-2H7Zm8 0a1 1 0 1 0 0 2h2a1 1 0 1 0 0-2h-2Zm-8 3a1 1 0 1 0 0 2h2a1 1 0 1 0 0-2H7Zm5 0a1 1 0 1 0 0 2h5a1 1 0 1 0 0-2h-5Z","clip-rule":"evenodd"})})}),e.jsx("div",{children:e.jsx(Te.Dropdown,{toggle:e.jsx(e.Fragment,{children:e.jsx("svg",{className:"w-6 h-6 text-gray-800 dark:text-white scale-125 mt-3 hover:text-blue-800 dark:hover:text-blue-800","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18Zm0 0a8.949 8.949 0 0 0 4.951-1.488A3.987 3.987 0 0 0 13 16h-2a3.987 3.987 0 0 0-3.951 3.512A8.948 8.948 0 0 0 12 21Zm3-11a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})})}),children:e.jsx("div",{className:"flex justify-center",children:e.jsxs($,{className:"w-48",children:[e.jsx($.Item,{children:e.jsx(f,{to:"/my-ads",children:"Mes annonces"})}),e.jsx($.Item,{children:e.jsx(f,{to:"/my-subscriptions",children:"Mes inscriptions"})}),e.jsx($.Item,{children:e.jsx(f,{to:"/users-handling",children:"Gestion utilisateurs"})}),e.jsx($.Item,{children:e.jsx(f,{to:"/my-account",children:"Fermeture de compte"})}),e.jsx($.Item,{children:e.jsx("p",{children:"Déconnexion"})})]})})})})]})]}),e.jsx(ee,{fluid:!0,rounded:!0,className:"w-screen sm:hidden",children:e.jsx(ee.Brand,{className:"bg-white p-5",children:e.jsxs("div",{className:"mt-2 flex gap-4 w-full justify-center",children:[e.jsx(f,{to:"/ads-grid",children:e.jsx("img",{src:ue,alt:"logo ParLink",className:"flex mr-32 h-7 sm:h-9 scale-150"})}),d?e.jsx(f,{to:"/calendar",onClick:()=>n(!1),children:e.jsx("svg",{className:"w-6 h-6 text-gray-800 dark:text-white scale-150 hover:text-blue-800 dark:hover:text-blue-800","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{fillRule:"evenodd",d:"M5 5a1 1 0 0 0 1-1 1 1 0 1 1 2 0 1 1 0 0 0 1 1h1a1 1 0 0 0 1-1 1 1 0 1 1 2 0 1 1 0 0 0 1 1h1a1 1 0 0 0 1-1 1 1 0 1 1 2 0 1 1 0 0 0 1 1 2 2 0 0 1 2 2v1a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V7a2 2 0 0 1 2-2ZM3 19v-7a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2Zm6.01-6a1 1 0 1 0-2 0 1 1 0 0 0 2 0Zm2 0a1 1 0 1 1 2 0 1 1 0 0 1-2 0Zm6 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0Zm-10 4a1 1 0 1 1 2 0 1 1 0 0 1-2 0Zm6 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0Zm2 0a1 1 0 1 1 2 0 1 1 0 0 1-2 0Z",clipRule:"evenodd"})})}):e.jsx(f,{to:"/ads-grid",onClick:()=>n(!0),children:e.jsx("svg",{className:"w-6 h-6 text-gray-800 dark:text-white scale-150 hover:text-blue-800 dark:hover:text-blue-800","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{fillRule:"evenodd",d:"M5.617 2.076a1 1 0 0 1 1.09.217L8 3.586l1.293-1.293a1 1 0 0 1 1.414 0L12 3.586l1.293-1.293a1 1 0 0 1 1.414 0L16 3.586l1.293-1.293A1 1 0 0 1 19 3v18a1 1 0 0 1-1.707.707L16 20.414l-1.293 1.293a1 1 0 0 1-1.414 0L12 20.414l-1.293 1.293a1 1 0 0 1-1.414 0L8 20.414l-1.293 1.293A1 1 0 0 1 5 21V3a1 1 0 0 1 .617-.924ZM9 7a1 1 0 0 0 0 2h6a1 1 0 1 0 0-2H9Zm0 4a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2H9Zm0 4a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2H9Z",clipRule:"evenodd"})})}),e.jsx(f,{to:"/files",children:e.jsx("svg",{className:"w-6 h-6 text-gray-800 dark:text-white scale-150 hover:text-blue-800 dark:hover:text-blue-800","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{"fill-rule":"evenodd",d:"M3 6a2 2 0 0 1 2-2h5.532a2 2 0 0 1 1.536.72l1.9 2.28H3V6Zm0 3v10a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V9H3Z","clip-rule":"evenodd"})})}),e.jsx(f,{to:"/map",children:e.jsx("svg",{className:"w-6 h-6 text-gray-800 dark:text-white scale-150 hover:text-blue-800 dark:hover:text-blue-800","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{"fill-rule":"evenodd",d:"M11.906 1.994a8.002 8.002 0 0 1 8.09 8.421 7.996 7.996 0 0 1-1.297 3.957.996.996 0 0 1-.133.204l-.108.129c-.178.243-.37.477-.573.699l-5.112 6.224a1 1 0 0 1-1.545 0L5.982 15.26l-.002-.002a18.146 18.146 0 0 1-.309-.38l-.133-.163a.999.999 0 0 1-.13-.202 7.995 7.995 0 0 1 6.498-12.518ZM15 9.997a3 3 0 1 1-5.999 0 3 3 0 0 1 5.999 0Z","clip-rule":"evenodd"})})})]})})})]})})}function qe(){const r=ht.create({baseURL:"http://192.168.1.75:3000/",headers:{"Content-Type":"application/json"}});return r.interceptors.request.use(s=>{const d=localStorage.getItem("accessToken");return d&&(s.headers.Authorization=`Bearer ${d}`),s}),r}const X=qe();async function oe(){try{const s=(await X.get("ad")).data;return console.log("Annonces récupérées:",s),s&&s.data&&s.data.ads?s.data.ads:(console.error("Format de réponse inattendu:",s),[])}catch(r){return console.error("Erreur lors de la récupération des annonces:",r),[]}}async function te(r){try{const{data:s}=await X.get(`ad/params?search=${r}`);return s}catch(s){return{error:s}}}async function ge(r){try{const s=await X.get(`ad/categories?categoryName=${r}`);return console.log(`Annonces récupérées pour la catégorie ${r}:`,s.data),s.data}catch(s){return console.error(`Erreur lors de la récupération des annonces pour la catégorie ${r}:`,s),[]}}async function xe(r){try{const s=await X.get(`ad/categories?subCategoryName=${r}`);return console.log(`Annonces récupérées pour la sous-catégorie ${r}:`,s.data),s.data}catch(s){return console.error(`Erreur lors de la récupération des annonces pour la sous-catégorie ${r}:`,s),[]}}async function pe(){try{const r=await X.get("categories");return console.log("Catégories récupérées:",r.data),r.data}catch(r){return console.error("Erreur lors de la récupération des catégories:",r),[]}}async function fe(r){try{const s=await X.get(`subCategories/${r}`);return console.log(`Sous-catégories récupérées pour la catégorie ${r}:`,s.data),s.data}catch(s){return console.error(`Erreur lors de la récupération des sous-catégories pour la catégorie ${r}:`,s),[]}}async function be(r){try{const{data:s}=await X.post(`ad/${r}`);return s}catch(s){return{error:s}}}const St=["places","drawing","geometry"];function _e({children:r}){const{isLoaded:s,loadError:d}=gt({googleMapsApiKey:"AIzaSyCiRGSR05s9hPcsy104Ss2IGQQLdZJoQKE",libraries:St});return d?e.jsx("p",{children:"Erreur au chargement de la carte"}):s?r:e.jsx("p",{children:"Chargement..."})}class Ne{defaultMapContainerStyle(s,d){return{width:s,height:d,borderRadius:"10px 10px 10px 10px"}}defaultMapCenter(){return{lat:46.49282,lng:2.60039}}defaultMapCenterAdDetail(s){return{lat:s.lat,lng:s.lng}}defaultMapZoom(s){return s}defaultMapOptions(s,d,n,m){return{zoomControl:s,tilt:d,gestureHandling:n,mapTypeId:m}}}function At(){const{idAd:r}=K(),[s,d]=o.useState(null),[n,m]=o.useState(0),[c,h]=o.useState(0);o.useEffect(()=>{(async()=>{const T=await oe();if(T){const L=T.find(Z=>Z.id.toString()===r);d(L?{...L,lat:parseFloat(L.lat),lng:parseFloat(L.lng)}:null)}})()},[r]),o.useEffect(()=>{if(s){const M=s.attendees-n;h(M)}},[s,n]);const g=M=>{const T=parseInt(M.target.value);m(T)},u=s?new Date(s.startTime):new Date,p=s?new Date(s.endTime):new Date,v=u.getDate().toString().padStart(2,"0"),w=(u.getMonth()+1).toString().padStart(2,"0"),_=u.getFullYear(),C=u.getHours().toString().padStart(2,"0"),A=u.getMinutes().toString().padStart(2,"0"),S=p.getHours().toString().padStart(2,"0"),F=p.getMinutes().toString().padStart(2,"0"),k=`Le ${v}/${w}/${_} de ${C}h${A} à ${S}h${F}`,U=new Ne;return e.jsx(e.Fragment,{children:e.jsxs(_e,{children:[e.jsx("h1",{className:"font-titleTest text-3xl sm:my-40",children:"Fiche de l'annonce"}),s?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center items-center ml-1 sm:ml-0 scale-90 sm:scale-100",children:e.jsxs(V,{children:[e.jsx("p",{className:"text-xl font-titleTest border-b-4 border-blue-700",children:e.jsx("strong",{children:s.title})}),e.jsxs("div",{className:"flex justify-start items-start mt-10 gap-36 font-bodyTest italic",children:[e.jsxs("div",{className:"flex flex-col justify-start items-start",children:[e.jsx("p",{children:s.address}),e.jsxs("div",{className:"flex flex-row gap-6",children:[e.jsxs("p",{children:[s.postalCode," "]}),e.jsx("p",{children:s.city})]})]}),e.jsx("p",{children:k})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("img",{src:s.adPicture,alt:"Ad Image",className:"w-40 h-auto"}),e.jsx("p",{className:"mt-10 mb-8 max-w-xs break-words",children:s.description})]}),e.jsx("div",{className:"w-96 sm:w-full flex justify-center items-center",children:e.jsx(je,{mapContainerStyle:U.defaultMapContainerStyle("400px","30vh"),center:U.defaultMapCenterAdDetail(s),zoom:U.defaultMapZoom(18),options:U.defaultMapOptions(!0,0,"auto","satellite"),children:e.jsx(we,{position:{lat:+s.lat,lng:+s.lng}},s.id)})}),e.jsxs("div",{className:"flex flex-row justify-start items-start mt-8 gap-44",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("p",{children:["Places disponibles: ",c]}),e.jsx(ie,{id:"attendees",name:"attendees",type:"number",value:n.toString(),onChange:g,min:"0",max:s.attendees.toString()})]}),e.jsx("div",{className:"mb-2 block",children:e.jsx(Y,{htmlFor:"comment",value:"Discussions"})})]}),e.jsxs("div",{className:"flex justify-evenly gap-8 font-bodyTest mt-8 mb-10",children:[e.jsx("span",{className:"before:block before:absolute before:-inset-1 before:-skew-y-3 before:bg-gray-700 relative flex gap-2 mt-2",children:e.jsx(me,{className:"bg-gray-700",children:e.jsx("span",{className:"relative m-1",children:"Contacter"})})}),e.jsx("span",{className:"before:block before:absolute before:-inset-1 before:-skew-y-3 before:bg-blue-700 relative flex gap-2 mt-2",children:e.jsx(me,{className:"bg-blue-700",children:e.jsx("span",{className:"relative text-white m-1",children:"S'inscrire"})})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ve,{id:"comment",name:"comment",className:"font-bodyTest mb-8 pl-10 h-22",placeholder:"Commentaire...",rows:2}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-6",children:e.jsx(et,{className:"text-gray-400 h-5 w-5"})})]})]})})}):e.jsx("p",{className:"font-bodyTest text-2xl my-32 italic text-orange-500",children:"Oups! Il n'y a pas d'annonce correspondante"})]})})}function Ce(){return e.jsx(e.Fragment,{children:e.jsx("div",{className:"fixed bottom-1 left-1/2 z-50 px-2 content-center rounded bg-orange-400 max-sm:hidden py-2",children:e.jsxs(f,{"data-cy":"map",className:"text-md flex gap-2 content-center items-center text-white",to:"/map",children:["Voir sur la carte",e.jsx(tt,{className:"h-6 w-6"})]})})})}function Ut({event:r}){const s=new Date(r.startTime),d=new Date(r.endTime),n=s.getDate().toString().padStart(2,"0"),m=(s.getMonth()+1).toString().padStart(2,"0"),c=s.getFullYear(),h=s.getHours().toString().padStart(2,"0"),g=s.getMinutes().toString().padStart(2,"0"),u=d.getHours().toString().padStart(2,"0"),p=d.getMinutes().toString().padStart(2,"0"),v=`Le ${n}/${m}/${c} de ${h}h${g} à ${u}h${p}`,w=le(),_=C=>{w(`/annonce/${C.id}`,{state:{event:C}})};return e.jsx(e.Fragment,{children:e.jsx("li",{children:e.jsx("button",{className:"text-blue-800 text-bold text-bodyTest",onClick:()=>_(r),children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("b",{children:r.title}),e.jsx("i",{className:"tracking-wider",children:v}),e.jsxs("i",{className:"flex justify-between items-center",children:[r.city," ",e.jsxs("span",{className:"text-blue-700 font-bold",children:[" Nbp ",r.attendees]})]}),e.jsx("img",{src:r.adPicture,alt:"Ad Image",className:"w-96 h-40 md:w-80 mt-2"})]})})},r.id)})}function Mt({events:r}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"demo-app-sidebar-section",children:[e.jsxs("h2",{className:"text-lg font-titleTest font-bold mb-4 border-e-4 border-solid border-blue-700",children:["Toutes les annonces (",r.length,")"]}),e.jsx("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map(s=>e.jsxs(V,{className:"my-4 shadow-lg",children:[e.jsx(f,{to:`/edit-annonce/${s.id}`,className:"link text-red-800 text-bodyTest",children:e.jsx(ye,{})}),e.jsx(Ut,{event:s},s.id)]},s.id))})]})})}function Lt({eventInfo:r}){const{timeText:s,event:d}=r;return e.jsx("span",{className:"flex flex-col text-xs text-white w-72 py-1 before:block before:absolute before:-inset-1 before:-skew-y-3 before:bg-orange-400 relative inline-block my-2",children:e.jsxs("span",{className:"relative text-white flex flex-col",children:[e.jsx("b",{children:s}),e.jsx("i",{className:"truncate break-all sm:break-normal w-28 sm:w-full",children:d==null?void 0:d.title})]})})}const Ft=({mobileView:r,showWeekNumbers:s,eventInputs:d,handleEventClick:n})=>e.jsx(pt,{timeZone:"local",plugins:[ft,bt,vt],initialView:"dayGridMonth",headerToolbar:{start:r?"title":"prev,today,next",center:r?"prev,next,today":"title",end:r?"":"dayGridMonth,timeGridWeek,timeGridDay"},weekends:!0,events:d,eventContent:m=>e.jsx(Lt,{eventInfo:m}),eventClick:n,locale:yt,weekNumbers:s,navLinks:!0,dayMaxEvents:!0,selectable:!0,height:r?"95vh":"90vh"});function ke(r,s){let d;return(...n)=>{clearTimeout(d),d=setTimeout(()=>r(...n),s)}}function Tt({searchQuery:r}){const[s,d]=o.useState(""),[n,m]=o.useState([]),[c,h]=o.useState([]),[g,u]=o.useState(!0),[p,v]=o.useState(!1),[w,_]=o.useState(!0),[C,A]=o.useState([]),[S,F]=o.useState({}),{id:k}=K();o.useEffect(()=>{U(),D()},[]),o.useEffect(()=>{k&&t(k)},[k]),o.useEffect(()=>{M()},[n,s,r]),o.useEffect(()=>{const a=()=>{u(window.innerWidth>=640),v(window.innerWidth<640)};return window.addEventListener("resize",a),a(),()=>window.removeEventListener("resize",a)},[]);const U=async()=>{const a=await oe();h(a)},M=async()=>{try{const a=s||r||"";let i=await te(a);w||n.length===0?i=await te(a):i={data:{ads:(await Promise.all(n.map(y=>ge(y)))).flatMap(y=>y.data.ads)}};const j=i.data.ads;if(!Array.isArray(j)){console.error("Attendait une liste d'annonces mais a reçu:",j);return}const E=j.map(l=>({...l,startTime:new Date(l.startTime),endTime:new Date(l.endTime)}));h(E)}catch(a){console.error("Erreur lors de la récupération des annonces:",a)}},T=async a=>{a==="all"?(m([]),_(!0)):(_(!1),m(i=>i.includes(a)?i.filter(j=>j!==a):[...i,a])),await M()},L=async a=>{try{const j=(await xe(a)).data.ads;if(!Array.isArray(j)){console.error("Attendait une liste d'annonces mais a reçu:",j);return}h(j)}catch(i){console.error(`Erreur lors de la récupération des annonces pour la sous-catégorie ${a}:`,i)}},Z=async a=>{try{const i=await fe(a);i&&i.data&&Array.isArray(i.data.subCategories)?F(j=>({...j,[a]:i.data.subCategories})):(console.warn(`Réponse inattendue pour les sous-catégories de la catégorie ${a}:`,i),F(j=>({...j,[a]:[]})))}catch(i){console.error(`Erreur lors de la récupération des sous-catégories de la catégorie ${a}:`,i),F(j=>({...j,[a]:[]}))}},B=o.useCallback(ke(a=>{d(a)},500),[]),q=a=>{const{value:i}=a.target;B(i)},O=c.map(a=>({id:String(a.id),title:a.title,start:a.startTime,end:a.endTime})),J=le(),W=a=>{const i=a.event.id;J(`/annonce/${i}`)},D=async()=>{try{const i=(await pe()).data.categories;A(["all",...i]),console.log("Catégories récupérées:",i)}catch(a){console.error("Erreur lors de la récupération des catégories:",a)}},t=async a=>{try{const i=await be(a);console.log("Détails de l'annonce:",i)}catch(i){console.error(`Erreur lors de la récupération des détails de l'annonce avec l'id ${a}:`,i)}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-row justify-around items-center gap-4 my-6 border-b-2 py-4 font-bodyTest",children:C==null?void 0:C.map(a=>e.jsxs("div",{className:"event_filter_wrapper relative group",children:[e.jsx("div",{className:"relative",children:e.jsx(f,{to:"",onClick:()=>T(a),onMouseEnter:()=>Z(a),className:"flex active:ring focus:outline-none focus:border-b-2 focus:border-b-blue-800",children:e.jsx("span",{className:"active:before:block active:before:absolute active:before:-inset-1 active:before:-skew-y-3 active:before:bg-blue-700 active:relative active:inline-block hover:before:block hover:before:absolute hover:before:-inset-1 hover:before:-skew-y-3 hover:before:bg-blue-700 hover:relative hover:inline-block",children:e.jsx(Y,{htmlFor:a,className:`flex ${n.includes(a)||a==="all"&&w?"font-bold border-b-4 border-b-blue-800 active:relative active:text-white hover:relative hover:text-white text-xs sm:text-lg":"flex active:relative active:text-white hover:relative hover:text-white text-xs sm:text-lg"}`,children:a==="all"?"Toutes":a})})})}),S[a]&&S[a].length>0&&e.jsx("div",{className:"absolute right-0 mt-2 bg-white shadow-lg p-2 rounded-md w-60 z-10 hidden group-hover:block",children:S[a].map((i,j)=>e.jsx(f,{to:"",className:"block px-3 py-1 text-sm text-gray-800 hover:bg-blue-700 hover:text-white ms-14 sm:ms-0",onClick:()=>L(i),children:i},j))}),e.jsx("p",{className:`${n.includes(a)||a==="all"&&w?"font-bold text-sm text-center":"font-light text-sm text-center"}`})]},a))}),!c||c.length===0?e.jsx("p",{className:"font-bodyTest text-2xl my-32 italic text-orange-500",children:"Nous n'avons pas trouvé d'évènement."}):e.jsx("h1",{className:"font-titleTest text-3xl my-14",children:"Calendrier des annonces"}),e.jsx("div",{className:"sm:hidden w-50 my-16",children:e.jsx(ie,{className:"w-80",id:"search",type:"text",icon:he,placeholder:"Rechercher...",value:s,onChange:q})}),e.jsxs("div",{className:"flex flex-wrap gap-8 overflow-hidden",children:[e.jsx("div",{className:`w-full ${p?"p-0":""}`,children:e.jsx(Ft,{mobileView:p,showWeekNumbers:g,eventInputs:O,handleEventClick:W})}),e.jsx("div",{className:"w-full mt-10 sm:mt-0",children:e.jsx(Mt,{events:c})}),e.jsx(Ce,{})]})]})}function Dt({searchQuery:r}){const[s,d]=o.useState([]),[n,m]=o.useState(null),[c,h]=o.useState(""),[g,u]=o.useState([]),[p,v]=o.useState(!0),[w,_]=o.useState([]),[C,A]=o.useState({}),{id:S}=K();o.useEffect(()=>{F(),B()},[]),o.useEffect(()=>{S&&W(S)},[S]),o.useEffect(()=>{k()},[g,c,r]);const F=async()=>{try{const t=await oe();t&&d(t.map(a=>({...a,lat:parseFloat(a.lat),lng:parseFloat(a.lng)})))}catch(t){console.error("Erreur lors de la récupération des annonces:",t)}},k=async()=>{try{const t=c||r||"";let a=await te(t);p||g.length===0?a=await te(t):a={data:{ads:(await Promise.all(g.map(l=>ge(l)))).flatMap(l=>l.data.ads)}};const i=a.data.ads;if(!Array.isArray(i)){console.error("Attendait une liste d'annonces mais a reçu:",i);return}d(i.map(j=>({...j,lat:parseFloat(j.lat),lng:parseFloat(j.lng)})))}catch(t){console.error("Erreur lors de la récupération des annonces:",t)}},U=async t=>{t==="all"?(u([]),v(!0)):(v(!1),u(a=>a.includes(t)?a.filter(i=>i!==t):[...a,t])),await k()},M=async t=>{try{const i=(await xe(t)).data.ads;if(!Array.isArray(i)){console.error("Attendait une liste d'annonces mais a reçu:",i);return}d(i)}catch(a){console.error(`Erreur lors de la récupération des annonces pour la sous-catégorie ${t}:`,a)}},T=async t=>{try{const a=await fe(t);a&&a.data&&Array.isArray(a.data.subCategories)?A(i=>({...i,[t]:a.data.subCategories})):(console.warn(`Réponse inattendue pour les sous-catégories de la catégorie ${t}:`,a),A(i=>({...i,[t]:[]})))}catch(a){console.error(`Erreur lors de la récupération des sous-catégories de la catégorie ${t}:`,a),A(i=>({...i,[t]:[]}))}},L=o.useCallback(ke(t=>{h(t)},500),[]),Z=t=>{const{value:a}=t.target;L(a)},B=async()=>{try{const a=(await pe()).data.categories;_(["all",...a]),console.log("Catégories récupérées:",a)}catch(t){console.error("Erreur lors de la récupération des catégories:",t)}},q=t=>{t!==n&&m(t)},O=le(),J=t=>{O(`/annonce/${t.id}`,{state:{ad:t}})},W=async t=>{try{const a=await be(t);console.log("Détails de l'annonce:",a)}catch(a){console.error(`Erreur lors de la récupération des détails de l'annonce avec l'id ${t}:`,a)}},D=new Ne;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-around items-center gap-4 my-6 border-b-2 py-4 text-xs sm:text-lg font-bodyTest",children:w.map(t=>e.jsxs("div",{className:"event_filter_wrapper relative group",children:[e.jsx("div",{className:"relative",children:e.jsx(f,{to:"",onClick:()=>U(t),onMouseEnter:()=>T(t),className:"flex active:ring focus:outline-none focus:border-b-2 focus:border-b-blue-800",children:e.jsx("span",{className:"active:before:block active:before:absolute active:before:-inset-1 active:before:-skew-y-3 active:before:bg-blue-700 active:relative active:inline-block hover:before:block hover:before:absolute hover:before:-inset-1 hover:before:-skew-y-3 hover:before:bg-blue-700 hover:relative hover:inline-block",children:e.jsx(Y,{htmlFor:t,className:`flex ${g.includes(t)||t==="all"&&p?"font-bold border-b-4 border-b-blue-800 active:relative active:text-white hover:relative hover:text-white text-xs sm:text-lg":"flex active:relative active:text-white hover:relative hover:text-white text-xs sm:text-lg"}`,children:t==="all"?"Toutes":t})})})}),C[t]&&C[t].length>0&&e.jsx("div",{className:"absolute right-0 mt-2 bg-white shadow-lg p-2 rounded-md w-60 z-10 hidden group-hover:block",children:C[t].map((a,i)=>e.jsx(f,{to:"",className:"block px-3 py-1 text-sm text-gray-800 hover:bg-blue-700 hover:text-white ms-14 sm:ms-0",onClick:()=>M(a),children:a},i))}),e.jsx("p",{className:`${g.includes(t)||t==="all"&&p?"font-bold text-sm text-center":"font-light text-sm text-center"}`})]},t))}),s.length===0?e.jsx("p",{"data-cy":"no-ads",className:"font-bodyTest text-2xl my-32 italic text-orange-500",children:"Nous n'avons pas trouvé d'évènement."}):e.jsx("h1",{className:"font-titleTest text-3xl my-14",children:"Voir les annonces sur la carte"}),e.jsx("div",{className:"sm:hidden w-50 my-16",children:e.jsx(ie,{className:"w-80",id:"search",type:"text",icon:he,placeholder:"Rechercher...",value:c,onChange:Z})}),e.jsx(_e,{children:e.jsx("div",{className:"w-50 sm:w-full flex justify-center items-center",children:e.jsx(je,{mapContainerStyle:D.defaultMapContainerStyle("1200px","80vh"),center:D.defaultMapCenter(),zoom:D.defaultMapZoom(6),options:D.defaultMapOptions(!0,0,"auto","satellite"),children:s.map(t=>e.jsx(we,{position:{lat:+t.lat,lng:+t.lng},onClick:()=>q(t.id),children:n===t.id?e.jsx(xt,{onCloseClick:()=>m(null),children:e.jsx("button",{className:"text-blue-800 font-bold",onClick:()=>J(t),children:e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:t.title}),e.jsxs("p",{children:[t.postalCode," ",t.city]})]})})}):null},t.id))})})})]})}const Ue={all:0};function Et({searchQuery:r}){const[s,d]=o.useState(""),[n,m]=o.useState([]),[c,h]=o.useState(!0),[g,u]=o.useState([]),[p,v]=o.useState(!0),[w,_]=o.useState([]),[C,A]=o.useState([]),[S,F]=o.useState(Ue),[k,U]=o.useState({}),[M,T]=o.useState(""),{id:L}=K();console.log("categoryCounts",S),console.log("role",M),o.useEffect(()=>{const l=localStorage.getItem("role");l&&T(l)},[]),o.useEffect(()=>{Z(),j()},[]),o.useEffect(()=>{L&&E(L)},[L]),o.useEffect(()=>{B()},[n,s,r]);const Z=async()=>{const l=await oe();_(l),i(l),q(l)},B=async()=>{try{const l=s||r||"";let b;c||n.length===0?b=await te(l):b={data:{ads:(await Promise.all(n.map(ae=>ge(ae)))).flatMap(ae=>ae.data.ads)}};const y=b.data.ads;if(!Array.isArray(y)){console.error("Attendait une liste d'annonces mais a reçu:",y);return}u(y.slice(0,12)),v(y.length>12)}catch(l){console.error("Erreur lors de la récupération des annonces:",l)}},q=l=>{const b=l.filter(y=>{const G=c||n.length===0||n.includes(y.category),Q=!s||y.title.toLowerCase().includes(s.toLowerCase())||y.city.toLowerCase().includes(s.toLowerCase());return G&&Q});u(b.slice(0,12)),v(b.length>12)},O=async l=>{l==="all"?(m([]),h(!0)):(h(!1),m(b=>b.includes(l)?b.filter(y=>y!==l):[...b,l])),await B()},J=async l=>{try{const y=(await xe(l)).data.ads;if(!Array.isArray(y)){console.error("Attendait une liste d'annonces mais a reçu:",y);return}u(y.slice(0,12)),v(y.length>12)}catch(b){console.error(`Erreur lors de la récupération des annonces pour la sous-catégorie ${l}:`,b)}},W=async l=>{try{const b=await fe(l);b&&b.data&&Array.isArray(b.data.subCategories)?U(y=>({...y,[l]:b.data.subCategories})):(console.warn(`Réponse inattendue pour les sous-catégories de la catégorie ${l}:`,b),U(y=>({...y,[l]:[]})))}catch(b){console.error(`Erreur lors de la récupération des sous-catégories de la catégorie ${l}:`,b),U(y=>({...y,[l]:[]}))}},D=o.useCallback(ke(l=>{d(l)},500),[]),t=l=>{const{value:b}=l.target;D(b)},a=()=>{const l=g.length,y=w.filter(G=>{const Q=c||n.length===0||n.includes(G.category),ae=!s||G.title.toLowerCase().includes(s.toLowerCase())||G.city.toLowerCase().includes(s.toLowerCase());return Q&&ae}).slice(l,l+12);if(y.length===0){v(!1);return}setTimeout(()=>{u([...g,...y])},1500)},i=l=>{const b=l.reduce((y,G)=>{const Q=G.category;return y[Q]=(y[Q]||0)+1,y.all=(y.all||0)+1,y},{...Ue});F(b),localStorage.getItem("refreshToken")},j=async()=>{try{const b=(await pe()).data.categories;A(["all",...b]),console.log("Catégories récupérées:",b)}catch(l){console.error("Erreur lors de la récupération des catégories:",l)}},E=async l=>{try{const b=await be(l);console.log("Détails de l'annonce:",b)}catch(b){console.error(`Erreur lors de la récupération des détails de l'annonce avec l'id ${l}:`,b)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-row justify-around items-center gap-4 my-6 border-b-2 py-4 font-bodyTest",children:[C.map(l=>e.jsxs("div",{className:"event_filter_wrapper relative group",children:[e.jsx("div",{className:"relative",children:e.jsx(f,{"data-cy":"category",to:"",onClick:()=>O(l),onMouseEnter:()=>W(l),className:"flex active:ring focus:outline-none focus:border-b-2 focus:border-b-blue-800",children:e.jsx("span",{className:"active:before:block active:before:absolute active:before:-inset-1 active:before:-skew-y-3 active:before:bg-blue-700 active:relative active:inline-block hover:before:block hover:before:absolute hover:before:-inset-1 hover:before:-skew-y-3 hover:before:bg-blue-700 hover:relative hover:inline-block",children:e.jsx(Y,{htmlFor:l,className:`flex ${n.includes(l)||l==="all"&&c?"font-bold border-b-4 border-b-blue-800 active:relative active:text-white hover:relative hover:text-white text-xs sm:text-lg":"flex active:relative active:text-white hover:relative hover:text-white text-xs sm:text-lg"}`,children:l==="all"?"Toutes":l})})})}),k[l]&&k[l].length>0&&e.jsx("div",{className:"absolute right-0 mt-2 bg-white shadow-lg rounded-md w-60 z-10 hidden group-hover:block",children:k[l].map((b,y)=>e.jsx(f,{to:"",className:"block px-3 py-1 text-sm text-gray-800 hover:bg-blue-700 hover:text-white ms-14 sm:ms-0",onClick:()=>J(b),children:b},y))}),e.jsx("p",{className:`${n.includes(l)||l==="all"&&c?"font-bold text-sm text-center":"font-light text-sm text-center"}`})]},l)),e.jsxs("div",{className:"flex justify-end items-center max-sm:hidden",children:[e.jsx(f,{className:"text-blue-800",to:"/ads-grid",children:e.jsx(Ie,{className:"w-8 h-8 tex-blue-800"})}),e.jsx(f,{"data-cy":"adslist",className:"text-blue-800",to:"/ads-list",children:e.jsx(ze,{className:"w-8 h-8"})})]})]}),e.jsx("h2",{className:"font-titleTest text-xl  sm:text-2xl mb-4",children:g.length===0?e.jsxs(e.Fragment,{children:[e.jsxs("h2",{className:"font-titleTest text-3xl my-14",children:["Fil des annonces : ",g.length]}),e.jsx("p",{className:"font-bodyTest text-2xl mt-28 italic text-orange-500",children:"Nous n'avons pas trouvé d'évènement."})]}):e.jsxs("h2",{"data-cy":"ads",className:"font-titleTest text-3xl my-14",children:["Fil des annonces : ",g.length]})}),e.jsx("div",{className:"sm:hidden w-50 my-4",children:e.jsx(ie,{className:"w-80",id:"search",type:"text",icon:he,placeholder:"Rechercher...",value:s,onChange:t})}),e.jsx("div",{className:`grid grid-cols-1 mb-2\r
            `,children:e.jsx(De,{children:g.map(l=>e.jsx("div",{className:"relative h-64 md:h-96",children:e.jsx(f,{to:`/ad/${l.id}`,className:"link",children:e.jsx("div",{className:"absolute inset-0 flex items-end justify-end p-5 bg-cover bg-center bg-no-repeat",style:{backgroundImage:`url(${l.adPicture})`},children:e.jsxs("div",{className:"p-3 bg-gray-500 bg-opacity-50 text-white",children:[e.jsx("b",{children:Be(new Date(l.startTime),"'le' dd/MM/yyyy 'à' HH'h'mm",{locale:Ge})}),e.jsx("br",{}),e.jsx("i",{children:l.title}),e.jsx("br",{}),e.jsx("b",{children:l.city})]})})})},l.id))})}),e.jsx(He,{dataLength:g.length,next:a,hasMore:p,loader:e.jsx("div",{className:"flex justify-center items-center w-full",children:e.jsx(Ze,{visible:!0,height:"80",width:"80",color:"#1A56DB",radius:"8",ariaLabel:"three-dots-loading",wrapperStyle:{},wrapperClass:""})}),endMessage:e.jsx("p",{className:"text-center mt-6 text-blue-800",children:e.jsx("b",{children:"Fin de la liste!"})}),children:e.jsx("div",{className:"md:flex flex-wrap justify-between item-center gap-2 mt-8",children:g.map(l=>e.jsx(V,{className:"my-4 shadow-lg sm:w-80 sm:h-80",children:e.jsxs(f,{to:`/ad/${l.id}`,className:"link text-blue-800 text-bodyTest",children:[e.jsx(f,{to:`/edit-ad/${l.id}`,className:"link text-red-800 text-bodyTest",children:e.jsx(ye,{})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("b",{children:l.title}),e.jsx("i",{className:"tracking-wider",children:l.start}),e.jsxs("i",{className:"flex justify-between items-center",children:[l.city," ",e.jsxs("span",{className:"text-blue-700 font-bold",children:[" Nbp ",l.attendees]})]}),e.jsx("img",{src:l.adPicture,alt:"Ad Image",className:"w-96 h-40 md:w-80 mt-2"})]})]})},l.id))})}),e.jsx(Ce,{})]})}const Me={all:0};function Pt({searchQuery:r}){const[s,d]=o.useState([]),[n,m]=o.useState(!0),[c,h]=o.useState([]),[g,u]=o.useState(!0),[p,v]=o.useState([]),[w,_]=o.useState([]),[C,A]=o.useState(Me),[S,F]=o.useState({}),{id:k}=K();console.log("categoryCounts",C),o.useEffect(()=>{U(),J()},[]),o.useEffect(()=>{k&&W(k)},[k]),o.useEffect(()=>{M()},[s,r]);const U=async()=>{const t=await oe();v(t),O(t),T(t)},M=async()=>{try{const t=r||"";let a;n||s.length===0?a=await te(t):a={data:{ads:(await Promise.all(s.map(l=>ge(l)))).flatMap(l=>l.data.ads)}};const i=a.data.ads;if(!Array.isArray(i)){console.error("Attendait une liste d'annonces mais a reçu:",i);return}h(i.slice(0,10)),u(i.length>10)}catch(t){console.error("Erreur lors de la récupération des annonces:",t)}},T=t=>{const a=t.filter(i=>{const j=n||s.length===0||s.includes(i.category),E=!r||i.title.toLowerCase().includes(r.toLowerCase())||i.city.toLowerCase().includes(r.toLowerCase());return j&&E});h(a.slice(0,6)),u(a.length>6)},L=async t=>{t==="all"?(d([]),m(!0)):(m(!1),d(a=>a.includes(t)?a.filter(i=>i!==t):[...a,t])),await M()},Z=async t=>{try{const i=(await xe(t)).data.ads;if(!Array.isArray(i)){console.error("Attendait une liste d'annonces mais a reçu:",i);return}h(i.slice(0,10)),u(i.length>10)}catch(a){console.error(`Erreur lors de la récupération des annonces pour la sous-catégorie ${t}:`,a)}},B=async t=>{try{const a=await fe(t);a&&a.data&&Array.isArray(a.data.subCategories)?F(i=>({...i,[t]:a.data.subCategories})):(console.warn(`Réponse inattendue pour les sous-catégories de la catégorie ${t}:`,a),F(i=>({...i,[t]:[]})))}catch(a){console.error(`Erreur lors de la récupération des sous-catégories de la catégorie ${t}:`,a),F(i=>({...i,[t]:[]}))}},q=()=>{const t=c.length,i=p.filter(j=>{const E=n||s.length===0||s.includes(j.category),l=!r||j.title.toLowerCase().includes(r.toLowerCase())||j.city.toLowerCase().includes(r.toLowerCase());return E&&l}).slice(t,t+10);if(i.length===0){u(!1);return}setTimeout(()=>{h([...c,...i])},1500)},O=t=>{const a=t.reduce((i,j)=>{const E=j.category;return i[E]=(i[E]||0)+1,i.all=(i.all||0)+1,i},{...Me});A(a)},J=async()=>{try{const a=(await pe()).data.categories;_(["all",...a]),console.log("Catégories récupérées:",a)}catch(t){console.error("Erreur lors de la récupération des catégories:",t)}},W=async t=>{try{const a=await be(t);console.log("Détails de l'annonce:",a)}catch(a){console.error(`Erreur lors de la récupération des détails de l'annonce avec l'id ${t}:`,a)}},D=new Ne;return e.jsx(e.Fragment,{children:e.jsxs(_e,{children:[e.jsxs("div",{className:"flex flex-row justify-around items-center gap-4 my-6 border-b-2 py-4 font-bodyTest",children:[w.map(t=>e.jsxs("div",{className:"event_filter_wrapper relative group",children:[e.jsx("div",{className:"relative",children:e.jsx(f,{to:"",onClick:()=>L(t),onMouseEnter:()=>B(t),className:"flex active:ring focus:outline-none focus:border-b-2 focus:border-b-blue-800",children:e.jsx("span",{className:"active:before:block active:before:absolute active:before:-inset-1 active:before:-skew-y-3 active:before:bg-blue-700 active:relative active:inline-block hover:before:block hover:before:absolute hover:before:-inset-1 hover:before:-skew-y-3 hover:before:bg-blue-700 hover:relative hover:inline-block",children:e.jsx(Y,{htmlFor:t,className:`flex ${s.includes(t)||t==="all"&&n?"font-bold border-b-4 border-b-blue-800 active:relative active:text-white hover:relative hover:text-white text-xs sm:text-lg":"flex active:relative active:text-white hover:relative hover:text-white text-xs sm:text-lg"}`,children:t==="all"?"Toutes":t})})})}),S[t]&&S[t].length>0&&e.jsx("div",{className:"absolute right-0 mt-2 bg-white shadow-lg p-2 rounded-md w-60 z-10 hidden group-hover:block",children:S[t].map((a,i)=>e.jsx(f,{to:"",className:"block px-3 py-1 text-sm text-gray-800 hover:bg-blue-700 hover:text-white",onClick:()=>Z(a),children:a},i))}),e.jsx("p",{className:`${s.includes(t)||t==="all"&&n?"font-bold text-sm text-center":"font-light text-sm text-center"}`})]},t)),e.jsxs("div",{className:"flex justify-end items-center max-sm:hidden",children:[e.jsx(f,{className:"text-blue-800",to:"/ads-grid",children:e.jsx(Ie,{className:"w-8 h-8 tex-blue-800"})}),e.jsx(f,{className:"text-blue-800",to:"/ads-list",children:e.jsx(ze,{className:"w-8 h-8"})})]})]}),c.length===0?e.jsxs(e.Fragment,{children:[e.jsxs("h2",{className:"font-titleTest text-3xl my-14",children:["Fil des annonces : ",c.length]}),e.jsx("p",{className:"font-bodyTest text-2xl mt-28 italic text-orange-500",children:"Nous n'avons pas trouvé d'évènement."})]}):e.jsxs("h2",{className:"font-titleTest text-3xl my-14",children:["Fil des annonces : ",c.length]}),e.jsx("div",{className:"grid grid-cols-1 mb-2",children:e.jsx(De,{children:c.map(t=>e.jsx("div",{className:"relative h-64 md:h-96",children:e.jsx(f,{to:`/ad/${t.id}`,className:"link",children:e.jsx("div",{className:"absolute inset-0 flex items-end justify-end p-5 bg-cover bg-center bg-no-repeat",style:{backgroundImage:`url(${t.adPicture})`},children:e.jsxs("div",{className:"p-3 bg-gray-500 bg-opacity-50 text-white",children:[e.jsx("b",{children:Be(new Date(t.startTime),"'le' dd/MM/yyyy 'à' HH'h'mm",{locale:Ge})}),e.jsx("br",{}),e.jsx("i",{children:t.title}),e.jsx("br",{}),e.jsx("b",{children:t.city})]})})})},t.id))})}),e.jsx(He,{dataLength:c.length,next:q,hasMore:g,loader:e.jsx("div",{className:"flex justify-center items-center w-full",children:e.jsx(Ze,{visible:!0,height:"80",width:"80",color:"#1A56DB",radius:"8",ariaLabel:"three-dots-loading",wrapperStyle:{},wrapperClass:""})}),endMessage:e.jsx("p",{className:"text-center mt-6 text-blue-800",children:e.jsx("b",{children:"Fin de la liste!"})}),children:e.jsx("div",{className:"md:flex flex-wrap justify-between item-center gap-2 mt-8",children:c.filter(t=>{if(r==="")return t;if(t.title.toLowerCase().includes(r.toLowerCase())||t.city.toLowerCase().includes(r.toLowerCase()))return t}).map(t=>e.jsx(V,{className:"w-full my-4 shadow-lg",children:e.jsxs(f,{to:`/ad/${t.id}`,className:"w-full link text-blue-800 text-bodyTest",children:[e.jsx(f,{to:`/edit-ad/${t.id}`,className:"link text-red-800 text-bodyTest",children:e.jsx(ye,{})}),e.jsxs("div",{className:" grid grid-cols-1 md:grid-cols-3",color:"violet-900",children:[e.jsxs("div",{className:"col-span-2 flex flex-col ",children:[e.jsx("p",{className:"text-start text-blue-600 p-1",children:t.start}),e.jsxs("p",{className:"text-center p-1",children:[e.jsx("b",{children:t.title})," "]}),e.jsx("p",{className:"text-justify visible max-sm:hidden mb-1 line-clamp-1",children:t.description}),e.jsxs("span",{className:"grid grid-cols-2 ",children:[e.jsx("i",{className:"text-start",children:t.city}),e.jsxs("span",{className:" text-blue-700 flex gap-1 justify-end items-center font-bold",children:["Nbp: ",t.attendees," "]})]})]}),e.jsx("div",{className:"w-96 sm:w-full flex justify-center items-center",children:t.lat&&t.lng?e.jsx(je,{mapContainerStyle:D.defaultMapContainerStyle("250px","18vh"),center:{lat:Number(t.lat),lng:Number(t.lng)},zoom:D.defaultMapZoom(18),options:D.defaultMapOptions(!0,0,"auto","satellite"),children:e.jsx(we,{position:{lat:Number(t.lat),lng:Number(t.lng)}},t.id)}):e.jsx("p",{children:"Coordonnées indisponibles"})})]})]})},t.id))})}),e.jsx(Ce,{})]})})}const ne="w-[35px] h-[40px]  ",$t=[{path:"/",label:"Retour",icon:e.jsx(ot,{className:ne})},{path:"/ads-grid",label:"Accueil",icon:e.jsx(dt,{className:ne})},{path:"/new-ad",label:"Ajouter",icon:e.jsx(ct,{className:ne})},{path:"/chat",label:"Chat",icon:e.jsx(mt,{className:ne})}];function It(){return e.jsxs(e.Fragment,{children:[e.jsx(Ke,{className:"w-full bg-gray-200 mt-28 mb-18 sm:mt-48 scale-125 sm:scale-100 sm:sticky sm:relative sm:-bottom-8",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"grid w-full grid-cols-2 gap-8 px-6 py-8 md:grid-cols-4",children:[e.jsx(de,{col:!0,children:e.jsxs("div",{className:"flex flex-col items-start justify-start",children:[e.jsx(ce,{title:"Company"}),e.jsx(P,{href:"#",className:"sm:hidden",children:"ParLink"}),e.jsx(P,{href:"#",className:"hidden sm:block",children:"À propos de ParLink"}),e.jsx(P,{href:"#",children:"Plan du site"})]})}),e.jsx(de,{col:!0,children:e.jsxs("div",{className:"flex flex-col items-start justify-start",children:[e.jsx(ce,{title:"help center"}),e.jsx(P,{href:"/contact",children:e.jsx("span",{children:"Nous contacter"})}),e.jsx(P,{href:"#",className:"sm:hidden",children:"Cookies"}),e.jsx(P,{href:"#",className:"hidden sm:block",children:"Paramètres des cookies"})]})}),e.jsx(de,{col:!0,children:e.jsxs("div",{className:"flex flex-col items-start justify-start",children:[e.jsx(ce,{title:"legal"}),e.jsx(P,{href:"/legal",className:"sm:hidden",children:"Mentions"}),e.jsx(P,{href:"/legal",className:"hidden sm:block",children:"Mentions Légales"}),e.jsx(P,{href:"/confidentiality",className:"sm:hidden",children:"Confidentialité"}),e.jsx(P,{href:"/confidentiality",className:"hidden sm:block",children:"Politique de confidentialité"})]})}),e.jsx(de,{col:!0,children:e.jsxs("div",{className:"flex flex-col items-start justify-start",children:[e.jsx(ce,{title:"download"}),e.jsx(P,{href:"#",children:"Mobile"}),e.jsx(P,{href:"#",children:"Desktop"})]})})]}),e.jsxs("div",{className:"w-full bg-gray-300 px-4 pt-5 pb-24 sm:py-5 flex flex-col sm:flex-row items-center justify-between",children:[e.jsxs("div",{className:"flex space-x-10 sm:space-x-4 sm:mt-0 justify-center items-center mb-3 sm:mb-0",children:[e.jsx(re,{href:"#",icon:st}),e.jsx(re,{href:"#",icon:at}),e.jsx(re,{href:"#",icon:rt}),e.jsx(re,{href:"#",icon:nt}),e.jsx(re,{href:"#",icon:lt})]}),e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(Ye,{className:"sm:text-xl",href:"#",by:"AquilDev™, Inc. | Tous droits reservés",year:2024})})]})]})}),e.jsx("div",{className:"fixed lg:hidden bottom-0 left-0 z-50 w-full h-16 bg-white border-t border-gray-200 dark:bg-gray-700 dark:border-gray-600 tablet p-3 scale-110",children:e.jsxs("div",{className:"grid h-full max-w-lg grid-cols-5 font-medium",children:[$t.map((r,s)=>e.jsx(f,{to:r.path,children:e.jsx("button",{type:"button",className:"inline-flex flex-col items-center justify-center text-gray-800 dark:text-white hover:text-blue-800 dark:hover:text-blue-800",children:r.icon})},s)),e.jsx(Te.Dropdown,{toggle:e.jsx(it,{className:ne}),children:e.jsx("div",{className:"flex justify-center",children:e.jsxs($,{className:"w-48",children:[e.jsx($.Item,{children:e.jsx(f,{to:"/my-ads",children:"Mes annonces"})}),e.jsx($.Item,{children:e.jsx(f,{to:"/my-subscriptions",children:"Mes inscriptions"})}),e.jsx($.Item,{children:e.jsx(f,{to:"/users-handling",children:"Gestion utilisateurs"})}),e.jsx($.Item,{children:e.jsx(f,{to:"/my-account",children:"Fermeture de compte"})}),e.jsx($.Item,{children:e.jsx("p",{children:"Déconnexion"})})]})})})]})})]})}const z="/assets/poolcar-OMFYfMQW.png",R="/assets/childcare-BLscyeBS.png",I="/assets/event-Ca89pxhe.jpg",H="/assets/tutoring-BwoKxlZM.jpg",zt=[{id:1,firstname:"Luis",lastname:"Jaramillo",birthDate:new Date(1982,3,22),email:"ljaramillo@gmail.com",phone:"0601060601",isSubscribed:!0,subscriptions:[{ad_id:3,ad_title:"Sortie collective au zoo",ad_address:"5 rue de la victoire",ad_city:"Tarbes",ad_postal_code:"65000",ad_lat:"43.234192",ad_lng:"0.071030",ad_start:x("30/05/2024",10,30),ad_end:x("30/05/2024",15,30),ad_attendees:4,ad_category:"events",ad_description:"Sortie découverte au zoo",ad_imageUrl:I,ad_comments:[{id:1,firstname:"Raúl",lastname:"Duque",message:"Un petit message de test.",date:"envoyé le 24/04/2024"}]},{ad_id:5,ad_title:"Sortie collective au zoo",ad_address:"20 rue du port",ad_city:"Bordeaux",ad_postal_code:"33800",ad_lat:"44.8317861",ad_lng:"-0.5613553",ad_start:x("30/05/2024",10,30),ad_end:x("30/05/2024",15,30),ad_attendees:4,ad_category:"events",ad_description:"Sortie découverte au zoo",ad_imageUrl:I,ad_comments:[]},{ad_id:10,ad_title:"Soutien en français",ad_address:"8 rue de paris",ad_city:"Nancy",ad_postal_code:"54000",ad_lat:"48.6927117",ad_lng:"6.1653217",ad_start:x("28/05/2024",10,15),ad_end:x("28/05/2024",11,15),ad_attendees:4,ad_category:"tutoring",ad_description:"Cours de soutien en français niveau CM1",ad_imageUrl:H,ad_comments:[{id:1,firstname:"Alba",lastname:"Urrutia",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:2,firstname:"Federico",lastname:"Vázquez",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:3,firstname:"Roberto",lastname:"Celedón",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:4,firstname:"Miriam",lastname:"Gómez",message:"Un petit message de test.",date:"envoyé le 24/04/2024"}]}]},{id:2,firstname:"Paulina",lastname:"Delgado",birthDate:new Date(1981,11,12),email:"pdelgado@gmail.com",phone:"0601060601",isSubscribed:!0,subscriptions:[{ad_id:7,ad_title:"Garde d'enfants",ad_address:"3 allée des bleuets",ad_city:"Narbonne",ad_postal_code:"11100",ad_lat:"43.1869784",ad_lng:"3.0264988",ad_start:x("12/06/2024",14,30),ad_end:x("12/06/2024",16,30),ad_attendees:4,ad_category:"childcare",ad_description:"Garde d'enfants pour l'après-midi",ad_imageUrl:R,ad_comments:[{id:1,firstname:"Jorge",lastname:"De León",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:2,firstname:"Emiliano",lastname:"Rodríguez",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:3,firstname:"Lucía",lastname:"Cepeda",message:"Un petit message de test.",date:"envoyé le 24/04/2024"}]}]},{id:3,firstname:"Gabriel",lastname:"Lozano",birthDate:new Date(1987,2,21),email:"glozano@gmail.com",phone:"0601060601",isSubscribed:!0,subscriptions:[{ad_id:2,ad_title:"Garde d'enfants",ad_address:"70 rue Pasteur",ad_city:"Valence",ad_postal_code:"26000",ad_lat:"44.951290",ad_lng:"4.900990",ad_start:x("23/05/2024",14,15),ad_end:x("23/05/2024",17,15),ad_attendees:2,ad_category:"childcare",ad_description:"Garde d'enfants pour l'après-midi",ad_imageUrl:R,ad_comments:[{id:1,firstname:"Laura",lastname:"Morelo",message:"Un message est un test.",date:"envoyé le 22/02/2024"},{id:2,firstname:"Eduardo",lastname:"Restrepo",message:"Voici mon message de test.",date:"envoyé le 17/03/2024"}]},{ad_id:18,ad_title:"Garde d'enfants",ad_address:"52 rue de la fosse aux loups",ad_city:"Nevers",ad_postal_code:"58000",ad_lat:"46.9859036",ad_lng:"3.1822656",ad_start:x("12/09/2024",9,30),ad_end:x("12/09/2024",11,30),ad_attendees:4,ad_category:"childcare",ad_description:"Garde d'enfants pour la matinée",ad_imageUrl:R,ad_comments:[{id:1,firstname:"Julia",lastname:"Robles",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:2,firstname:"Helena",lastname:"Zúñiga",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:3,firstname:"Óscar",lastname:"Valiente",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:4,firstname:"Susana",lastname:"León",message:"Un petit message de test.",date:"envoyé le 24/04/2024"}]},{ad_id:4,ad_title:"Soutien en maths",ad_address:"30 av C. de Gaulle",ad_city:"Castres",ad_postal_code:"81100",ad_lat:"43.601580",ad_lng:"2.251310",ad_start:x("12/08/2024",15,10),ad_end:x("12/08/2024",16,10),ad_attendees:1,ad_category:"tutoring",ad_description:"Cours de soutien en maths niveau CM2",ad_imageUrl:H,ad_comments:[{id:1,firstname:"Manuel",lastname:"Torres",message:"Voilà ce message de test.",date:"envoyé le 04/11/2024"},{id:2,firstname:"Flavia",lastname:"Suárez",message:"Ceci est un message de test.",date:"envoyé le 25/01/2024"},{id:3,firstname:"Javier",lastname:"Luna",message:"Et un message de test.",date:"envoyé le 04/07/2024"}]},{ad_id:1,ad_title:"Covoiturage école",ad_address:"18 rue Jean Moulin",ad_city:"Amiens",ad_postal_code:"80000",ad_lat:"49.883440",ad_lng:"2.281520",ad_start:x("10/07/2024",10,30),ad_end:x("10/07/2024",10,50),ad_attendees:3,ad_category:"poolcar",ad_description:"Covoiturage pour emmener les enfants à l'école",ad_imageUrl:z,ad_comments:[{id:1,firstname:"Gabriel",lastname:"Rubio",message:"Ce message est un test.",date:"envoyé le 10/07/2024"},{id:2,firstname:"María",lastname:"Moreno",message:"Ceci est un message de test.",date:"envoyé le 25/01/2024"},{id:3,firstname:"Enrique",lastname:"Quesada",message:"Voici un message de test.",date:"envoyé le 29/09/2024"},{id:4,firstname:"Teresa",lastname:"Hernández",message:"Mon message de test.",date:"envoyé le 17/05/2024"}]},{ad_id:21,ad_title:"Sortie collective au jardin botanique",ad_address:"6 boulevard de Stalingrad",ad_city:"Périgueux",ad_postal_code:"24000",ad_lat:"45.1833",ad_lng:"0.7167",ad_start:x("07/06/2024",9,30),ad_end:x("07/06/2024",11,30),ad_attendees:4,ad_category:"events",ad_description:"Sortie découverte au jardin botanique",ad_imageUrl:I,ad_comments:[{id:1,firstname:"Flavia",lastname:"Feliciano",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:2,firstname:"Luisa",lastname:"Echevarría",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:3,firstname:"Patricia",lastname:"Muñoz",message:"Un petit message de test.",date:"envoyé le 24/04/2024"}]}]},{id:4,firstname:"Diana",lastname:"Reyes",birthDate:new Date(1984,4,17),email:"dreyes@gmail.com",phone:"0601060601",isSubscribed:!0,subscriptions:[{ad_id:12,ad_title:"Covoiturage école",ad_address:"50 allée du rossignol",ad_city:"Caen",ad_postal_code:"14000",ad_lat:"49.1935697",ad_lng:"-0.3947772",ad_start:x("30/05/2024",10,30),ad_end:x("30/05/2024",15,30),ad_attendees:4,ad_category:"poolcar",ad_description:"Covoiturage pour emmener les enfants à l'école",ad_imageUrl:z,ad_comments:[{id:1,firstname:"Jaime",lastname:"Narváez",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:2,firstname:"Lidia",lastname:"Vélez",message:"Un petit message de test.",date:"envoyé le 24/04/2024"}]},{ad_id:6,ad_title:"Sortie à la piscine",ad_address:"10 boulevard Jean Jaurès",ad_city:"Lille",ad_postal_code:"59160",ad_lat:"50.6362762",ad_lng:"3.0189568",ad_start:x("02/07/2024",10,15),ad_end:x("02/07/2024",11,45),ad_attendees:4,ad_category:"events",ad_description:"Sortie à la piscine",ad_imageUrl:I,ad_comments:[{id:1,firstname:"Ernesto",lastname:"Vaerla",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:2,firstname:"Marisa",lastname:"Caicedo",message:"Un petit message de test.",date:"envoyé le 24/04/2024"}]},{ad_id:20,ad_title:"Soutien en maths",ad_address:"29 avenue de provence",ad_city:"Antibes",ad_postal_code:"06000",ad_lat:"43.5756631",ad_lng:"7.1195755",ad_start:x("26/10/2024",10,30),ad_end:x("26/10/2024",15,30),ad_attendees:4,ad_category:"tutoring",ad_description:"Cours de soutien en maths niveau CM1",ad_imageUrl:H,ad_comments:[]},{ad_id:19,ad_title:"Garde d'enfants",ad_address:"3 rue marceau",ad_city:"Dijon",ad_postal_code:"21000",ad_lat:"47.3276334",ad_lng:"5.0448015",ad_start:x("30/05/2024",15,15),ad_end:x("30/05/2024",17,15),ad_attendees:4,ad_category:"childcare",ad_description:"Garde d'enfants pour l'après-midi",ad_imageUrl:R,ad_comments:[{id:1,firstname:"Josefina",lastname:"Enríquez",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:2,firstname:"Mateo",lastname:"Monterola",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:3,firstname:"Ricardo",lastname:"Ruiz",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:4,firstname:"Eduardo",lastname:"Montaner",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:5,firstname:"Juan",lastname:"Alvaredo",message:"Un petit message de test.",date:"envoyé le 24/04/2024"}]}]},{id:5,firstname:"Laura",lastname:"Vives",birthDate:new Date(1980,5,20),email:"lvives@gmail.com",phone:"0601060601",isSubscribed:!0,subscriptions:[{ad_id:11,ad_title:"Soutien en histoire",ad_address:"24 avenue Anatole France",ad_city:"Troyes",ad_postal_code:"10000",ad_lat:"48.285241",ad_lng:"4.073956",ad_start:x("13/09/2024",14,30),ad_end:x("13/09/2024",15,30),ad_attendees:4,ad_category:"tutoring",ad_description:"Cours de soutien en histoire niveau CM2",ad_imageUrl:H,ad_comments:[{id:1,firstname:"Tina",lastname:"Paz",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:2,firstname:"David",lastname:"Londoño",message:"Un petit message de test.",date:"envoyé le 24/04/2024"}]},{ad_id:14,ad_title:"Covoiturage école",ad_address:"6 avenue Pierre Brossolette",ad_city:"Aix-en-Provence",ad_postal_code:"13090",ad_lat:"43.5229241",ad_lng:"5.442414",ad_start:x("20/11/2024",8,10),ad_end:x("20/11/2024",8,20),ad_attendees:4,ad_category:"poolcar",ad_description:"Covoiturage pour emmener les enfants à l'école",ad_imageUrl:z,ad_comments:[{id:1,firstname:"Iván",lastname:"Gallardo",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:2,firstname:"Cecilia",lastname:"Bravo",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:3,firstname:"Efraín",lastname:"Zuluaga",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:4,firstname:"Héctor",lastname:"Peña",message:"Un petit message de test.",date:"envoyé le 24/04/2024"}]},{ad_id:15,ad_title:"Sortie collective au centre aéré",ad_address:"5 avenue de l'aérodrome",ad_city:"Perpignan",ad_postal_code:"66000",ad_lat:"42.7213337",ad_lng:"2.8856205",ad_start:x("12/07/2024",10,15),ad_end:x("12/07/2024",15,30),ad_attendees:4,ad_category:"events",ad_description:"Sortie découverte au centre aéré",ad_imageUrl:I,ad_comments:[{id:1,firstname:"Pablo",lastname:"Torres",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:2,firstname:"Isabel",lastname:"Montoya",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:3,firstname:"Aleida",lastname:"Jiménez",message:"Un petit message de test.",date:"envoyé le 24/04/2024"}]}]},{id:6,firstname:"Elías",lastname:"Fuentes",birthDate:new Date(1984,4,17),email:"efuentes@gmail.com",phone:"0601060601",isSubscribed:!0,subscriptions:[{ad_id:8,ad_title:"Garde d'enfants",ad_address:"28 rue Charles Péguy",ad_city:"Béziers",ad_postal_code:"34500",ad_lat:"43.3475315",ad_lng:"3.230261",ad_start:x("18/10/2024",9,30),ad_end:x("18/10/2024",10,30),ad_attendees:4,ad_category:"childcare",ad_description:"Garde d'enfants pour la matinée",ad_imageUrl:R,ad_comments:[{id:1,firstname:"Diego",lastname:"Linares",message:"Un petit message de test.",date:"envoyé le 24/04/2024"}]},{ad_id:13,ad_title:"Sortie collective au musée",ad_address:"38 rue des acacias",ad_city:"Montpellier",ad_postal_code:"34090",ad_lat:"49.1935697",ad_lng:"-0.3947772",ad_start:x("22/09/2024",10,15),ad_end:x("22/09/2024",14,30),ad_attendees:4,ad_category:"events",ad_description:"Sortie découverte au musée",ad_imageUrl:I,ad_comments:[{id:1,firstname:"Pedro",lastname:"Clemente",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:2,firstname:"Carolina",lastname:"Heredia",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:3,firstname:"Gabriela",lastname:"Quiñónez",message:"Un petit message de test.",date:"envoyé le 24/04/2024"}]},{ad_id:17,ad_title:"Soutien en géo",ad_address:"6 rue des tanneurs",ad_city:"Rennes",ad_postal_code:"35700",ad_lat:"48.120503",ad_lng:"-1.6731231",ad_start:x("20/06/2024",14,30),ad_end:x("20/06/2024",15,30),ad_attendees:4,ad_category:"tutoring",ad_description:"Cours de soutien en géographie niveau CM1",ad_imageUrl:H,ad_comments:[{id:1,firstname:"Carlos",lastname:"Núñez",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:2,firstname:"Francisco",lastname:"Villanueva",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:3,firstname:"Jairo",lastname:"Márquez",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:4,firstname:"Beatriz",lastname:"Galarza",message:"Un petit message de test.",date:"envoyé le 24/04/2024"}]},{ad_id:9,ad_title:"Covoiturage école",ad_address:"40 boulevard Jules Verne",ad_city:"Nantes",ad_postal_code:"44300",ad_lat:"47.2364422",ad_lng:"-1.5332915",ad_start:x("24/09/2024",8,20),ad_end:x("24/09/2024",8,30),ad_attendees:4,ad_category:"poolcar",ad_description:"Covoiturage pour emmener les enfants à l'école",ad_imageUrl:z,ad_comments:[]},{ad_id:16,ad_title:"Covoiturage",ad_address:"37 rue de la tour",ad_city:"Agen",ad_postal_code:"47000",ad_lat:"44.2068383",ad_lng:"0.6263647",ad_start:x("13/06/2024",8,20),ad_end:x("13/06/2024",8,30),ad_attendees:4,ad_category:"poolcar",ad_description:"Covoiturage pour emmener les enfants à l'école",ad_imageUrl:z,ad_comments:[]}]}];function x(r,s=0,d=0){const[n,m,c]=r.split("/");return new Date(c,m-1,n,s,d)}async function Rt(){try{return zt}catch(r){console.log(r)}}const Ht=()=>{var c;const r=le(),s=h=>{r(`/annonce/${h.ad_id}`,{state:{subscription:h}})},{idUser:d}=K(),[n,m]=o.useState({id:0,firstname:"",lastname:"",birthDate:new Date,email:"",phone:"",isSubscribed:!0,subscriptions:null});return o.useEffect(()=>{(async()=>{const g=await Rt();if(g){const u=g.find(p=>p.id.toString()===d);m(u?{...u}:null)}})()},[d]),e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"font-titleTest text-3xl sm:my-40",children:"Mes annonces"}),n?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center items-center ml-1 sm:ml-0 scale-125 sm:scale-100 my-80 sm:my-0",children:e.jsxs(V,{children:[e.jsx("p",{className:"text-xl font-titleTest border-b-4 border-blue-700",children:e.jsxs("strong",{children:[n.firstname," ",n.lastname]})}),e.jsxs("p",{children:[n.email," - ",n.phone]}),e.jsx("div",{className:"md:flex flex-wrap justify-evenly item-center gap-4'",children:(c=n.subscriptions)==null?void 0:c.map(h=>e.jsx("div",{className:"flex justify-center items-center mb-1",children:e.jsx("button",{className:"text-blue-800 text-bold text-bodyTest",onClick:()=>s(h),children:e.jsxs(V,{className:"w-full sm:w-96 h-full sm:h-80 my-4 sm:my-2 mx-0 sm:mx-1 shadow-lg",children:[e.jsx("p",{className:"text-xl font-titleTest border-b-4 border-blue-700 mb-4",children:e.jsx("strong",{children:h.ad_title})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-evenly items-start",children:[e.jsx("img",{src:h.ad_imageUrl,alt:"Ad Image",className:"w-36 sm:w-40 h-auto"}),e.jsx("p",{className:"mt-10 max-w-xs break-words",children:h.ad_description})]}),e.jsx("div",{className:"flex justify-center items-start mt-4 gap-36 font-bodyTest italic",children:e.jsxs("div",{className:"flex flex-row gap-6",children:[e.jsx("p",{children:h.ad_postal_code}),e.jsx("p",{children:h.ad_city})]})})]})})},h.ad_id))})]})})}):e.jsx("p",{className:"font-bodyTest text-2xl my-32 italic text-orange-500",children:"Oups! Il n'y a pas d'annonce sur mon compte"})]})};function Zt(){const r=n=>{const m={};for(const[h,g]of n.entries())m[h]=g;const c=n.get("files");return c&&(m.files=c.name),m},s=async n=>{n.preventDefault();const m=new FormData(n.currentTarget),c=r(m),h=`export const formData = ${JSON.stringify(c,null,2)};`,g=new Blob([h],{type:"application/typescript"}),u=new FormData(n.currentTarget);u.append("file",g,"formData.ts");try{(await fetch("https://webhook.site/95b101ba-5fd5-43bf-8806-f634756c2e3d",{method:"POST",body:u})).ok?console.log("File uploaded successfully"):console.error("File upload failed")}catch(p){console.error("Error:",p)}alert("Formulaire soumis")},d=(n,m,c="text",h=!1)=>e.jsx($e,{variant:"outlined",label:m,id:n,name:n,type:c,required:h});return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center",children:e.jsxs(V,{className:"w-full md:max-w-md md:mx-auto hover:bg-transparent",children:[e.jsx("h5",{className:"text-2xl font-bold tracking-tight text-blue-800 dark:text-white",children:"Ajouter une annonce"}),e.jsxs("form",{className:"flex flex-col gap-4",onSubmit:s,children:[e.jsxs(Ee,{name:"categorie",id:"role",required:!0,children:[e.jsx("option",{className:"text-base font-medium text-blue-700",children:"Categorie"}),e.jsx("option",{children:"Cours"}),e.jsx("option",{children:"Sortie"}),e.jsx("option",{children:"Covoiturage"})]}),d("titre","Titre","text",!0),e.jsxs("div",{className:"relative",children:[e.jsx(ve,{id:"description","aria-describedby":"outlined_success_help",className:"peer block w-full appearance-none rounded-lg border border-gray-300 bg-transparent px-2.5 pb-2.5 pt-4 text-sm text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-white dark:focus:border-blue-500",placeholder:"","data-testid":"floating-label",name:"description",required:!0,rows:4}),e.jsx("label",{htmlFor:"description",className:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-sm text-gray-500 transition-transform duration-300 peer-placeholder-shown:top-1/4 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 peer-focus:text-blue-600 dark:bg-gray-900 dark:text-gray-400 peer-focus:dark:text-blue-500",children:"Description"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx("span",{className:"col-span-2",children:d("startdate","Début","date")}),d("starttime","heure","time")]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx("span",{className:"col-span-2",children:d("enddate","Fin","date")}),d("endtime","heure","time")]}),d("attendees","Nombre de places","number"),d("city","Ville"),d("country","Pays"),d("adress","Adresse"),e.jsx(Y,{htmlFor:"files",value:"Ajouter une image"}),e.jsx(Pe,{name:"files",id:"files"}),e.jsx(me,{type:"submit",children:"Ajouter l'annonce"})]})]})})})}const Bt=[{id:1,title:"Covoiturage école",address:"18 rue Jean Moulin",city:"Amiens",postal_code:"80000",lat:"49.883440",lng:"2.281520",start:"10/07/2024 à 10h30",end:"10/07/2024 à 10h50",attendees:3,category:"poolcar",description:"Covoiturage pour emmener les enfants à l'école",imageUrl:z,comments:[{id:1,firstname:"Gabriel",lastname:"Rubio",message:"Ce message est un test.",date:"envoyé le 10/07/2024"},{id:2,firstname:"María",lastname:"Moreno",message:"Ceci est un message de test.",date:"envoyé le 25/01/2024"},{id:3,firstname:"Enrique",lastname:"Quesada",message:"Voici un message de test.",date:"envoyé le 29/09/2024"},{id:4,firstname:"Teresa",lastname:"Hernández",message:"Mon message de test.",date:"envoyé le 17/05/2024"}]},{id:2,title:"Garde d'enfants",address:"70 rue Pasteur",city:"Valence",postal_code:"26000",lat:"44.951290",lng:"4.900990",start:"23/05/2024 à 14h15",end:"23/05/2024 à 17h15",attendees:2,category:"childcare",description:"Garde d'enfants pour l'après-midi",imageUrl:R,comments:[{id:1,firstname:"Laura",lastname:"Morelo",message:"Un message est un test.",date:"envoyé le 22/02/2024"},{id:2,firstname:"Eduardo",lastname:"Restrepo",message:"Voici mon message de test.",date:"envoyé le 17/03/2024"}]},{id:3,title:"Sortie collective au zoo",address:"5 rue de la victoire",city:"Tarbes",postal_code:"65000",lat:"43.234192",lng:"0.071030",start:"30/05/2024 à 10h30",end:"30/05/2024 à 15h30",attendees:4,category:"events",description:"Sortie découverte au zoo",imageUrl:I,comments:[{id:1,firstname:"Raúl",lastname:"Duque",message:"Un petit message de test.",date:"envoyé le 24/04/2024"}]},{id:4,title:"Soutien en maths",address:"30 av C. de Gaulle",city:"Castres",postal_code:"81100",lat:"43.601580",lng:"2.251310",start:"12/08/2024 à 15h10",end:"12/08/2024 à 16h10",attendees:1,category:"tutoring",description:"Cours de soutien en maths niveau CM2",imageUrl:H,comments:[{id:1,firstname:"Manuel",lastname:"Torres",message:"Voilà ce message de test.",date:"envoyé le 04/11/2024"},{id:2,firstname:"Flavia",lastname:"Suárez",message:"Ceci est un message de test.",date:"envoyé le 25/01/2024"},{id:3,firstname:"Javier",lastname:"Luna",message:"Et un message de test.",date:"envoyé le 04/07/2024"}]},{id:5,title:"Sortie collective au zoo",address:"20 rue du port",city:"Bordeaux",postal_code:"33800",lat:"44.8317861",lng:"-0.5613553",start:"30/05/2024 à 10h30",end:"30/05/2024 à 15h30",attendees:4,category:"events",description:"Sortie découverte au zoo",imageUrl:I,comments:[]},{id:6,title:"Sortie à la piscine",address:"10 boulevard Jean Jaurès",city:"Lille",postal_code:"59160",lat:"50.6362762",lng:"3.0189568",start:"02/07/202 à  1h15",end:"02/07/2024 à 11h45",attendees:4,category:"events",description:"Sortie à la piscine",imageUrl:I,comments:[{id:1,firstname:"Ernesto",lastname:"Vaerla",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:2,firstname:"Marisa",lastname:"Caicedo",message:"Un petit message de test.",date:"envoyé le 24/04/2024"}]},{id:7,title:"Garde d'enfants",address:"3 allée des bleuets",city:"Narbonne",postal_code:"11100",lat:"43.1869784",lng:"3.0264988",start:"12/06/2024 à 14h30",end:"12/06/2024 à 16h30",attendees:4,category:"childcare",description:"Garde d'enfants pour l'après-midi",imageUrl:R,comments:[{id:1,firstname:"Jorge",lastname:"De León",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:2,firstname:"Emiliano",lastname:"Rodríguez",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:3,firstname:"Lucía",lastname:"Cepeda",message:"Un petit message de test.",date:"envoyé le 24/04/2024"}]},{id:8,title:"Garde d'enfants",address:"28 rue Charles Péguy",city:"Béziers",postal_code:"34500",lat:"43.3475315",lng:"3.230261",start:"18/10/202 à  9h30",end:"18/10/2024 à 10h30",attendees:4,category:"childcare",description:"Garde d'enfants pour la matinée",imageUrl:R,comments:[{id:1,firstname:"Diego",lastname:"Linares",message:"Un petit message de test.",date:"envoyé le 24/04/2024"}]},{id:9,title:"Covoiturage école",address:"40 boulevard Jules Verne",city:"Nantes",postal_code:"44300",lat:"47.2364422",lng:"-1.5332915",start:"24/09/202 à  8h20",end:"24/09/202 à  8h30",attendees:4,category:"poolcar",description:"Covoiturage pour emmener les enfants à l'école",imageUrl:z,comments:[]},{id:10,title:"Soutien en français",address:"8 rue de paris",city:"Nancy",postal_code:"54000",lat:"48.6927117",lng:"6.1653217",start:"28/05/2024 à 10h15",end:"28/05/2024 à 11h15",attendees:4,category:"tutoring",description:"Cours de soutien en français niveau CM1",imageUrl:H,comments:[{id:1,firstname:"Alba",lastname:"Urrutia",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:2,firstname:"Federico",lastname:"Vázquez",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:3,firstname:"Roberto",lastname:"Celedón",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:4,firstname:"Miriam",lastname:"Gómez",message:"Un petit message de test.",date:"envoyé le 24/04/2024"}]},{id:11,title:"Soutien en histoire",address:"24 avenue Anatole France",city:"Troyes",postal_code:"10000",lat:"48.285241",lng:"4.073956",start:"13/09/2024 à 14h30",end:"13/09/2024 à 15h30",attendees:4,category:"tutoring",description:"Cours de soutien en histoire niveau CM2",imageUrl:H,comments:[{id:1,firstname:"Tina",lastname:"Paz",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:2,firstname:"David",lastname:"Londoño",message:"Un petit message de test.",date:"envoyé le 24/04/2024"}]},{id:12,title:"Covoiturage école",address:"50 allée du rossignol",city:"Caen",postal_code:"14000",lat:"49.1935697",lng:"-0.3947772",start:"30/05/2024 à 10h30",end:"30/05/2024 à 15h30",attendees:4,category:"poolcar",description:"Covoiturage pour emmener les enfants à l'école",imageUrl:z,comments:[{id:1,firstname:"Jaime",lastname:"Narváez",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:2,firstname:"Lidia",lastname:"Vélez",message:"Un petit message de test.",date:"envoyé le 24/04/2024"}]},{id:13,title:"Sortie collective au musée",address:"38 rue des acacias",city:"Montpellier",postal_code:"34090",lat:"49.1935697",lng:"-0.3947772",start:"22/09/2024 à 10h15",end:"22/09/2024 à 14h30",attendees:4,category:"events",description:"Sortie découverte au musée",imageUrl:I,comments:[{id:1,firstname:"Pedro",lastname:"Clemente",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:2,firstname:"Carolina",lastname:"Heredia",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:3,firstname:"Gabriela",lastname:"Quiñónez",message:"Un petit message de test.",date:"envoyé le 24/04/2024"}]},{id:14,title:"Covoiturage école",address:"6 avenue Pierre Brossolette",city:"Aix-en-Provence",postal_code:"13090",lat:"43.5229241",lng:"5.442414",start:"20/11/202 à  8h10",end:"20/11/202 à  8h20",attendees:4,category:"poolcar",description:"Covoiturage pour emmener les enfants à l'école",imageUrl:z,comments:[{id:1,firstname:"Iván",lastname:"Gallardo",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:2,firstname:"Cecilia",lastname:"Bravo",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:3,firstname:"Efraín",lastname:"Zuluaga",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:4,firstname:"Héctor",lastname:"Peña",message:"Un petit message de test.",date:"envoyé le 24/04/2024"}]},{id:15,title:"Sortie collective au centre aéré",address:"5 avenue de l'aérodrome",city:"Perpignan",postal_code:"66000",lat:"42.7213337",lng:"2.8856205",start:"12/07/2024 à 10h15",end:"12/07/2024 à 15h30",attendees:4,category:"events",description:"Sortie découverte au centre aéré",imageUrl:I,comments:[{id:1,firstname:"Pablo",lastname:"Torres",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:2,firstname:"Isabel",lastname:"Montoya",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:3,firstname:"Aleida",lastname:"Jiménez",message:"Un petit message de test.",date:"envoyé le 24/04/2024"}]},{id:16,title:"Covoiturage",address:"37 rue de la tour",city:"Agen",postal_code:"47000",lat:"44.2068383",lng:"0.6263647",start:"13/06/202 à  8h20",end:"13/06/202 à  8h30",attendees:4,category:"poolcar",description:"Covoiturage pour emmener les enfants à l'école",imageUrl:z,comments:[]},{id:17,title:"Soutien en géo",address:"6 rue des tanneurs",city:"Rennes",postal_code:"35700",lat:"48.120503",lng:"-1.6731231",start:"20/06/2024 à 14h30",end:"20/06/2024 à 15h30",attendees:4,category:"tutoring",description:"Cours de soutien en géographie niveau CM1",imageUrl:H,comments:[{id:1,firstname:"Carlos",lastname:"Núñez",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:2,firstname:"Francisco",lastname:"Villanueva",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:3,firstname:"Jairo",lastname:"Márquez",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:4,firstname:"Beatriz",lastname:"Galarza",message:"Un petit message de test.",date:"envoyé le 24/04/2024"}]},{id:18,title:"Garde d'enfants",address:"52 rue de la fosse aux loups",city:"Nevers",postal_code:"58000",lat:"46.9859036",lng:"3.1822656",start:"12/09/202 à  9h30",end:"12/09/2024 à 11h30",attendees:4,category:"childcare",description:"Garde d'enfants pour la matinée",imageUrl:R,comments:[{id:1,firstname:"Julia",lastname:"Robles",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:2,firstname:"Helena",lastname:"Zúñiga",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:3,firstname:"Óscar",lastname:"Valiente",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:4,firstname:"Susana",lastname:"León",message:"Un petit message de test.",date:"envoyé le 24/04/2024"}]},{id:19,title:"Garde d'enfants",address:"3 rue marceau",city:"Dijon",postal_code:"21000",lat:"47.3276334",lng:"5.0448015",start:"30/05/2024 à 15h15",end:"30/05/2024 à 17h15",attendees:4,category:"childcare",description:"Garde d'enfants pour l'après-midi",imageUrl:R,comments:[{id:1,firstname:"Josefina",lastname:"Enríquez",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:2,firstname:"Mateo",lastname:"Monterola",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:3,firstname:"Ricardo",lastname:"Ruiz",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:4,firstname:"Eduardo",lastname:"Montaner",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:5,firstname:"Juan",lastname:"Alvaredo",message:"Un petit message de test.",date:"envoyé le 24/04/2024"}]},{id:20,title:"Soutien en maths",address:"29 avenue de provence",city:"Antibes",postal_code:"06000",lat:"43.5756631",lng:"7.1195755",start:"26/10/2024 à 10h30",end:"26/10/2024 à 15h30",attendees:4,category:"tutoring",description:"Cours de soutien en maths niveau CM1",imageUrl:H,comments:[]},{id:21,title:"Sortie collective au jardin botanique",address:"6 boulevard de Stalingrad",city:"Périgueux",postal_code:"24000",lat:"45.1833",lng:"0.7167",start:"07/06/2024 à 9h30",end:"07/06/2024 11h30",attendees:4,category:"events",description:"Sortie découverte au jardin botanique",imageUrl:I,comments:[{id:1,firstname:"Flavia",lastname:"Feliciano",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:2,firstname:"Luisa",lastname:"Echevarría",message:"Un petit message de test.",date:"envoyé le 24/04/2024"},{id:3,firstname:"Patricia",lastname:"Muñoz",message:"Un petit message de test.",date:"envoyé le 24/04/2024"}]}],Gt=[{id:"1",name:"all",label:"Toutes"},{id:"2",name:"poolcar",label:"Covoiturage",group:[{id:1,title:"Musées et centres d'expositions"},{id:2,title:"Zoos et aquariums"},{id:3,title:"Parcs et jardins"},{id:4,title:"Camps de vacances"}]},{id:"3",name:"tutoring",label:"Soutien",group:[{id:1,title:"Mathématiques"},{id:2,title:"Enseignement moral et civique"},{id:3,title:"Histoire-géographie"},{id:4,title:"Technologie"}]},{id:"4",name:"childcare",label:"Garderie",group:[{id:1,title:"La garde à domicile partagée"},{id:2,title:"La crèche familial"},{id:3,title:"L'assistance maternelle"},{id:4,title:"La garde à domicile"}]},{id:"5",name:"events",label:"Sortie",group:[{id:1,title:"Piscine"},{id:2,title:"Promenade"},{id:3,title:"Ressources"},{id:4,title:"Parc"}]}];function Vt(){const{adId:r}=K(),[s,d]=o.useState({id:0,title:"",address:"",city:"",postal_code:"",lat:"",lng:"",start:"",end:"",attendees:0,category:"",description:"",imageUrl:""}),n=r?Bt.find(u=>u.id===parseInt(r)):void 0;console.log(r),console.log(n),o.useEffect(()=>{const u=p=>{if(!p)return"";const[v,w,_]=p.split("-");return!v||!w||!_?"":`${v}-${w.padStart(2,"0")}-${_.padStart(2,"0")}`};n&&d({id:n.id,title:n.title,address:n.address,city:n.city,postal_code:n.postal_code,lat:n.lat,lng:n.lng,start:u(n.start),end:u(n.end),attendees:n.attendees,category:n.category,description:n.description,imageUrl:n.imageUrl})},[n]);const m=u=>{const{name:p,value:v}=u.target;d({...s,[p]:v})},c=u=>{const p={};for(const[w,_]of u.entries())p[w]=_;const v=u.get("files");return v&&(p.files=v.name),p},h=async u=>{u.preventDefault();const p=new FormData(u.target),v=c(p),w=`export const formData = ${JSON.stringify(v,null,2)};`,_=new Blob([w],{type:"application/typescript"}),C=new FormData(u.target);C.append("file",_,"formData.ts");try{(await fetch("https://webhook.site/95b101ba-5fd5-43bf-8806-f634756c2e3d",{method:"POST",body:C})).ok?console.log("File uploaded successfully"):console.error("File upload failed")}catch(A){console.error("Error:",A)}alert("Formulaire soumis")},g=(u,p,v="text",w=!1)=>e.jsx($e,{variant:"outlined",label:p,id:u,name:u,type:v,required:w,value:s[u],onChange:m});return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex justify-center",children:e.jsxs(V,{className:"w-full md:max-w-md md:mx-auto hover:bg-transparent",children:[e.jsx("h5",{className:"text-2xl font-bold tracking-tight text-blue-800 dark:text-white",children:"Modifier une annonce"}),e.jsxs("form",{className:"flex flex-col gap-4",onSubmit:h,children:[e.jsx(Ee,{name:"category",id:"category",required:!0,value:s.category,onChange:m,children:Gt.map(u=>e.jsx("option",{value:u.label,children:u.label},u.id))}),g("title","Titre","text",!0),e.jsxs("div",{className:"relative",children:[e.jsx(ve,{value:s.description,onChange:m,id:"description","aria-describedby":"outlined_success_help",className:"peer block w-full appearance-none rounded-lg border border-gray-300 bg-transparent px-2.5 pb-2.5 pt-4 text-sm text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-white dark:focus:border-blue-500",placeholder:"","data-testid":"floating-label",name:"description",required:!0,rows:4}),e.jsx("label",{htmlFor:"description",className:"absolute left-1 top-2 z-10 origin-[0] -translate-y-4 scale-75 bg-white px-2 text-sm text-gray-500 transition-transform duration-300 peer-placeholder-shown:top-1/4 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-75 peer-focus:px-2 peer-focus:text-blue-600 dark:bg-gray-900 dark:text-gray-400 peer-focus:dark:text-blue-500",children:"Description"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx("span",{className:"col-span-2",children:g("start","Début","date")}),g("start","heure","time")]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx("span",{className:"col-span-2",children:g("end","Fin","date")}),g("end","heure","time")]}),g("attendees","Nombre de places","number"),g("address","Adresse"),g("postal_code","Code Postal"),g("city","Ville"),g("country","Pays"),e.jsx(Y,{htmlFor:"files",value:"Ajouter une image"}),e.jsx(Pe,{name:"files",id:"files"}),e.jsx(me,{type:"submit",children:"Mettre à jour l'annonce"})]})]})})})}const qt=qe();async function Ot(r){try{const{data:s}=await qt.post("/auth/login",r);return s}catch(s){return{error:s}}}function Le(){const r=le(),[s,d]=o.useState(!1),n=wt({email:Se().email("Adresse email invalide").required("Champs obligatoire"),password:Se().required("Champs obligatoire")}),{handleSubmit:m,handleChange:c,values:h,errors:g}=jt({initialValues:{email:"",password:""},validationSchema:n,onSubmit:async u=>{try{const p=await Ot(u);p.data.access_token&&(localStorage.setItem("accessToken",p.data.access_token),localStorage.setItem("refreshToken",p.data.refresh_token),d(!1),r("/ads-grid"))}catch(p){console.error("Login failed",p),d(!0)}}});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex justify-center items-center",children:[e.jsx("div",{className:"md:basis-4/12",children:e.jsx("img",{src:ue,className:"scale-75 mx-0 sm:mx-10",alt:"logo"})}),e.jsxs("div",{className:"md:basis-8/12",children:[e.jsx("h1",{className:"font-titleTest text-3xl my-8",children:"Connectez-vous"}),e.jsx("br",{}),s&&e.jsx("p",{className:"text-red-500 text-sm",children:"Identifiants incorects"}),e.jsxs("form",{onSubmit:m,children:[e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"email",className:"block mb-2 text-left text-sm font-medium text-gray-900 dark:text-white",children:"Email"}),e.jsx("input",{onChange:c,value:h.email,type:"email",id:"email",name:"email",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"",required:!0}),g.email&&e.jsx("p",{className:"text-red-500 text-sm",children:g.email})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"password",className:"block mb-2 text-sm text-left font-medium text-gray-900 dark:text-white",children:"Mot de passe"}),e.jsx("input",{onChange:c,value:h.password,type:"password",id:"password",name:"password",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:!0}),g.password&&e.jsx("p",{className:"text-red-500 text-sm",children:g.password})]}),e.jsx("button",{type:"submit",className:"text-white bg-blue-400 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full px-5 py-2.5 text-center dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:"Connexion"}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2",children:[e.jsxs("div",{className:"flex items-start mb-5",children:[e.jsx("input",{id:"remember",type:"checkbox",value:"",className:"w-4 h-4 border border-gray-300 rounded bg-gray-50 focus:ring-3 focus:ring-blue-300 dark:bg-gray-700 dark:border-gray-600 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800"}),e.jsx("label",{htmlFor:"remember",className:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300",children:"Se souvenir de moi"})]}),e.jsx("div",{className:"text-left",children:e.jsx(f,{to:"/forgot-password-page",className:"ms-2 text-sm text-blue-400 dark:text-blue-300 hover:underline",children:"Mot de passe oublié ?"})})]})]})]})]})})}function Jt(){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex justify-center items-center",children:[e.jsx("div",{className:"md:basis-4/12",children:e.jsx("img",{src:ue,className:"scale-75 mx-0 sm:mx-10",alt:"logo"})}),e.jsx("div",{className:"md:basis-8/12",children:e.jsxs("form",{children:[e.jsx("h1",{className:"font-titleTest text-3xl my-3",children:" Changer de mot de passe "}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"newpassword",className:"block mb-2 text-left text-sm font-medium  dark:text-white",children:"Nouveau mot de passe"}),e.jsx("input",{type:"text",id:"newpassword",className:"bg-gray-50 border border-gray-300  text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"",required:!0})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"password",className:"block mb-2 text-sm text-left font-medium  dark:text-white",children:" Confirmer le mot de passe"}),e.jsx("input",{type:"password",id:"password",className:"bg-gray-50 border border-gray-300  text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:!0})]}),e.jsx("button",{type:"submit",className:"text-white  bg-blue-400  focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full  px-5 py-2.5 text-center dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:"Valider"})," ",e.jsx("br",{})," ",e.jsx("br",{}),e.jsxs("div",{children:[e.jsx("input",{disabled:!0,checked:!0,id:"disabled-checked-checkbox",type:"checkbox",value:"",className:"w-4 h-4 text-blue-400 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:"disabled-checked-checkbox",className:"ms-2 text-sm  text-blue-400 dark:text-blue-400",children:"Votre mot de passe a été changé "})]})]})})]})})}const Wt=({allowedRoles:r})=>{const s=localStorage.getItem("accessToken");let d=null;if(s)try{const n=Re(s);d=n==null?void 0:n.role}catch(n){console.error("Invalid token",n)}return r.includes(d)?e.jsx(Fe,{}):e.jsx(Ve,{})},Qt=o.lazy(()=>se(()=>import("./ConfidentialityPage-DYmwdnl4.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),Kt=o.lazy(()=>se(()=>import("./LegalPage-W44RFwpF.js"),__vite__mapDeps([11,1,2,3,4,5,6,7,8,9,10]))),Yt=o.lazy(()=>se(()=>import("./ContactPage-DT7OBEhL.js"),__vite__mapDeps([12,1,2,3,4,5,6,7,8,9,10,13,14,15,16,17,18,19,20,21,22]))),Xt=o.lazy(()=>se(()=>import("./UserManagement-DtuiAL1n.js"),__vite__mapDeps([23,1,2,13,14,15,16,17,18,19,20,21,22,24,8,9,25,26,3,4,5,6,7,10,27]))),es=o.lazy(()=>se(()=>import("./UserProfilePage-BYrzh5tm.js"),__vite__mapDeps([28,1,2,3,4,5,6,7,8,9,10,24,25,26]))),ts=o.lazy(()=>se(()=>import("./UserEditProfilePage-LsDnwLty.js"),__vite__mapDeps([29,1,2,3,4,5,6,7,8,9,10,13,14,15,16,17,18,19,20,21,22,24,25,26,27])));function ss(){const[r,s]=o.useState([]),[d,n]=o.useState([]),[m,c]=o.useState("");function h(u){s([...r,u])}function g(u){n([...d,u])}return e.jsxs(e.Fragment,{children:[e.jsx(kt,{searchQuery:m,setSearchQuery:c}),e.jsxs(Qe,{children:[e.jsx(N,{path:"/",element:e.jsx(Le,{})}),e.jsx(N,{path:"/login",element:e.jsx(Le,{})}),e.jsx(N,{path:"/forgot-password-page",element:e.jsx(Jt,{})}),e.jsxs(N,{element:e.jsx(Ct,{}),children:[e.jsx(N,{element:e.jsx(Wt,{allowedRoles:["admin"]}),children:e.jsx(N,{path:"/users-handling",element:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Chargement..."}),children:e.jsx(Xt,{handleSubmitUser:u=>{}})})})}),e.jsx(N,{path:"/my-account",element:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Chargement..."}),children:e.jsx(es,{})})}),e.jsx(N,{path:"/edit-my-profile/:idProfile",element:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Chargement..."}),children:e.jsx(ts,{handleSubmitProfile:h})})}),e.jsx(N,{path:"/ad/:idAd",element:e.jsx(At,{})}),e.jsx(N,{path:"/my-ads/:idUser",element:e.jsx(Ht,{})}),e.jsx(N,{path:"/new-ad",element:e.jsx(Zt,{})}),e.jsx(N,{path:"/edit-ad/:adId",element:e.jsx(Vt,{})}),e.jsx(N,{path:"/calendar",element:e.jsx(Tt,{searchQuery:m})}),e.jsx(N,{path:"/map",element:e.jsx(Dt,{searchQuery:m})}),e.jsx(N,{path:"/confidentiality",element:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Chargement..."}),children:e.jsx(Qt,{})})}),e.jsx(N,{path:"/legal",element:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Chargement..."}),children:e.jsx(Kt,{})})}),e.jsx(N,{path:"/contact",element:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Chargement..."}),children:e.jsx(Yt,{handleSubmitContactForm:g})})}),e.jsx(N,{path:"/ads-grid",element:e.jsx(Et,{searchQuery:m})}),e.jsx(N,{path:"/ads-list",element:e.jsx(Pt,{searchQuery:m})})]}),e.jsx(N,{path:"*",element:e.jsx(Ve,{})})]}),e.jsx(It,{})]})}Je.createRoot(document.getElementById("root")).render(e.jsx(Oe.StrictMode,{children:e.jsx(ut,{children:e.jsx(ss,{})})}));
//# sourceMappingURL=index-vpAI1B8o.js.map
